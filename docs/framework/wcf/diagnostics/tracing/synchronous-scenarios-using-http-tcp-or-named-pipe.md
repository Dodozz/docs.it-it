---
title: Scenari sincroni con trasporti HTTP, TCP o pipe con nome
ms.date: 03/30/2017
ms.assetid: 7e90af1b-f8f6-41b9-a63a-8490ada502b1
ms.openlocfilehash: 28e612b190f4993e1ce7da0d1083c4e55f827d4a
ms.sourcegitcommit: 15ab532fd5e1f8073a4b678922d93b68b521bfa0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/29/2019
ms.locfileid: "58654003"
---
# <a name="synchronous-scenarios-using-http-tcp-or-named-pipe"></a><span data-ttu-id="e77b3-102">Scenari sincroni con trasporti HTTP, TCP o pipe con nome</span><span class="sxs-lookup"><span data-stu-id="e77b3-102">Synchronous Scenarios using HTTP, TCP or Named-Pipe</span></span>
<span data-ttu-id="e77b3-103">In questo argomento vengono descritte le attività e i trasferimenti di esecuzione in vari scenari request/reply sincroni che prevedono un client a thread singolo e che utilizzano un trasporto HTTP, TCP o pipe con nome.</span><span class="sxs-lookup"><span data-stu-id="e77b3-103">This topic describes the activities and transfers for different synchronous request/reply scenarios, with a single-threaded client, using HTTP, TCP or named pipe.</span></span> <span data-ttu-id="e77b3-104">Visualizzare [scenari asincroni con HTTP, TCP o Named Pipe](../../../../../docs/framework/wcf/diagnostics/tracing/asynchronous-scenarios-using-http-tcp-or-named-pipe.md) per altre informazioni sulle richieste a thread multipli.</span><span class="sxs-lookup"><span data-stu-id="e77b3-104">See [Asynchronous Scenarios using HTTP, TCP, or Named-Pipe](../../../../../docs/framework/wcf/diagnostics/tracing/asynchronous-scenarios-using-http-tcp-or-named-pipe.md) for more information on multi-threaded requests.</span></span>  
  
## <a name="synchronous-requestreply-without-errors"></a><span data-ttu-id="e77b3-105">Request/reply sincrono senza errori</span><span class="sxs-lookup"><span data-stu-id="e77b3-105">Synchronous Request/Reply without Errors</span></span>  
 <span data-ttu-id="e77b3-106">Contenuto della sezione vengono descritte le attività e i trasferimenti di esecuzione in uno scenario request/reply sincrono senza errori con un client a thread singolo.</span><span class="sxs-lookup"><span data-stu-id="e77b3-106">This section describes the activities and transfers for a valid synchronous request/reply scenario, with single-threaded client.</span></span>  
  
### <a name="client"></a><span data-ttu-id="e77b3-107">Client</span><span class="sxs-lookup"><span data-stu-id="e77b3-107">Client</span></span>  
  
#### <a name="establishing-communication-with-service-endpoint"></a><span data-ttu-id="e77b3-108">Apertura delle comunicazioni con un endpoint di servizio</span><span class="sxs-lookup"><span data-stu-id="e77b3-108">Establishing Communication with Service Endpoint</span></span>  
 <span data-ttu-id="e77b3-109">Un client viene costruito e aperto.</span><span class="sxs-lookup"><span data-stu-id="e77b3-109">A client is constructed and opened.</span></span> <span data-ttu-id="e77b3-110">Per ognuno di questi passaggi, l'attività di ambiente (A) viene trasferita rispettivamente a una "Costruzione Client" (B) e "Apertura Client" (C) attività.</span><span class="sxs-lookup"><span data-stu-id="e77b3-110">For each of these steps, the ambient activity (A) is transferred to a "Construct Client" (B) and "Open Client" (C) activity respectively.</span></span> <span data-ttu-id="e77b3-111">Ogni volta che viene trasferita a un'altra attività, l'attività di ambiente viene sospesa fino al trasferimento di restituzione, ovvero fino all'esecuzione del codice di ServiceModel.</span><span class="sxs-lookup"><span data-stu-id="e77b3-111">For each activity being transferred to, the ambient activity is suspended until there is a transfer back, that is, until ServiceModel code is executed.</span></span>  
  
#### <a name="making-a-request-to-service-endpoint"></a><span data-ttu-id="e77b3-112">Invio di una richiesta all'endpoint di servizio</span><span class="sxs-lookup"><span data-stu-id="e77b3-112">Making a Request to Service Endpoint</span></span>  
 <span data-ttu-id="e77b3-113">L'attività di ambiente viene trasferita a un'attività "ProcessAction" (D).</span><span class="sxs-lookup"><span data-stu-id="e77b3-113">The ambient activity is transferred to a "ProcessAction" (D) activity.</span></span> <span data-ttu-id="e77b3-114">Questa attività prevede l'invio di un messaggio di richiesta e la ricezione di un messaggio di risposta.</span><span class="sxs-lookup"><span data-stu-id="e77b3-114">Within this activity, a request message is sent, and a response message is received.</span></span> <span data-ttu-id="e77b3-115">L'attività termina quando il controllo viene restituito al codice utente.</span><span class="sxs-lookup"><span data-stu-id="e77b3-115">The activity ends when control returns to user code.</span></span> <span data-ttu-id="e77b3-116">Poiché si tratta di una richiesta sincrona, l'attività di ambiente viene sospesa fino alla restituzione del controllo.</span><span class="sxs-lookup"><span data-stu-id="e77b3-116">Because this is a synchronous request, the ambient activity suspends until control returns.</span></span>  
  
#### <a name="closing-communication-with-service-endpoint"></a><span data-ttu-id="e77b3-117">Chiusura delle comunicazioni con un endpoint di servizio</span><span class="sxs-lookup"><span data-stu-id="e77b3-117">Closing Communication with Service Endpoint</span></span>  
 <span data-ttu-id="e77b3-118">L'attività di chiusura del client (I) viene creata a partire dall'attività di ambiente.</span><span class="sxs-lookup"><span data-stu-id="e77b3-118">The client's close activity (I) is created from the ambient activity.</span></span> <span data-ttu-id="e77b3-119">Il comportamento è identico a quelli di apertura e di creazione.</span><span class="sxs-lookup"><span data-stu-id="e77b3-119">This is identical to new and open.</span></span>  
  
### <a name="server"></a><span data-ttu-id="e77b3-120">Server</span><span class="sxs-lookup"><span data-stu-id="e77b3-120">Server</span></span>  
  
#### <a name="setting-up-a-service-host"></a><span data-ttu-id="e77b3-121">Configurazione di un ServiceHost</span><span class="sxs-lookup"><span data-stu-id="e77b3-121">Setting up a Service Host</span></span>  
 <span data-ttu-id="e77b3-122">Le attività di creazione (N) e di apertura (O) di ServiceHost vengono create a partire dall'attività di ambiente (M).</span><span class="sxs-lookup"><span data-stu-id="e77b3-122">The ServiceHost’s new and open activities (N and O) are created from the ambient activity (M).</span></span>  
  
 <span data-ttu-id="e77b3-123">Un'attività di listener (P) viene creata tramite l'apertura di un ServiceHost per ogni listener.</span><span class="sxs-lookup"><span data-stu-id="e77b3-123">A listener activity (P) is created from opening a ServiceHost for each listener.</span></span> <span data-ttu-id="e77b3-124">L'attività di listener attende la ricezione e l'elaborazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="e77b3-124">The listener activity waits to receive and process data.</span></span>  
  
#### <a name="receiving-data-on-the-wire"></a><span data-ttu-id="e77b3-125">Ricezione di dati in transito</span><span class="sxs-lookup"><span data-stu-id="e77b3-125">Receiving Data on the Wire</span></span>  
 <span data-ttu-id="e77b3-126">Quando arrivano i dati in transito, viene creata un'attività "ReceiveBytes" Se non esiste già (Q) per elaborare i dati ricevuti.</span><span class="sxs-lookup"><span data-stu-id="e77b3-126">When data arrives on the wire, a "ReceiveBytes" activity is created if it does not already exist (Q) to process the received data.</span></span> <span data-ttu-id="e77b3-127">Inoltre, questa attività può essere riutilizzata per più messaggi appartenenti a una connessione o a una coda.</span><span class="sxs-lookup"><span data-stu-id="e77b3-127">This activity can be reused for multiple messages within a connection or queue.</span></span>  
  
 <span data-ttu-id="e77b3-128">Se dispone di una quantità sufficiente di dati per formare un messaggio di azione SOAP, l'attività "ReceiveBytes" avvia un'attività "ProcessMessage" (R).</span><span class="sxs-lookup"><span data-stu-id="e77b3-128">The ReceiveBytes activity launches a ProcessMessage activity (R) if it has enough data to form a SOAP action message.</span></span>  
  
 <span data-ttu-id="e77b3-129">L'attività R prevede l'elaborazione delle intestazioni di messaggio e la verifica dell'intestazione activityID.</span><span class="sxs-lookup"><span data-stu-id="e77b3-129">In activity R, the message headers are processed, and the activityID header is verified.</span></span> <span data-ttu-id="e77b3-130">Se questa intestazione è presente, l'ID attività viene impostato sull'attività "ProcessAction". In caso contrario, viene creato un nuovo ID.</span><span class="sxs-lookup"><span data-stu-id="e77b3-130">If this header is present, the activity ID is set to the ProcessAction activity; otherwise, a new ID is created.</span></span>  
  
 <span data-ttu-id="e77b3-131">Quando la chiamata viene elaborata, l'attività ProcessAction (S) viene creata e l'esecuzione viene trasferita a tale attività.</span><span class="sxs-lookup"><span data-stu-id="e77b3-131">ProcessAction activity (S) is created and being transferred to, when the call is processed.</span></span> <span data-ttu-id="e77b3-132">Questa attività termina al completamento di ogni elaborazione relativa al messaggio in ingresso, compresa l'esecuzione del codice utente (T) e, se necessario, l'invio del messaggio di risposta.</span><span class="sxs-lookup"><span data-stu-id="e77b3-132">This activity ends when all processing related to the incoming message is completed, including executing user code (T) and sending the response message if applicable.</span></span>  
  
#### <a name="closing-a-service-host"></a><span data-ttu-id="e77b3-133">Chiusura di un ServiceHost</span><span class="sxs-lookup"><span data-stu-id="e77b3-133">Closing a Service Host</span></span>  
 <span data-ttu-id="e77b3-134">L'attività di chiusura di un ServiceHost (Z) viene creata a partire dall'attività di ambiente.</span><span class="sxs-lookup"><span data-stu-id="e77b3-134">The ServiceHost’s close activity (Z) is created from the ambient activity.</span></span>  
  
 ![Diagramma che mostra scenari sincroni: HTTP, TCP o named pipe.](./media/synchronous-scenarios-using-http-tcp-or-named-pipe/synchronous-scenario-http-tcp-named-pipes.gif)  
  
 <span data-ttu-id="e77b3-136">Nelle \<a: name >, `A` è un simbolo di collegamento che descrive l'attività contenuta nel testo precedente e nella tabella 3.</span><span class="sxs-lookup"><span data-stu-id="e77b3-136">In \<A: name>, `A` is a shortcut symbol that describes the activity in the previous text and in table 3.</span></span> <span data-ttu-id="e77b3-137">mentre `Name` è un nome abbreviato dell'attività.</span><span class="sxs-lookup"><span data-stu-id="e77b3-137">`Name` is a shortened name of the activity.</span></span>  
  
 <span data-ttu-id="e77b3-138">Se `propagateActivity` = `true`, Processaction nel client sia servizio hanno lo stesso ID di attività.</span><span class="sxs-lookup"><span data-stu-id="e77b3-138">If `propagateActivity`=`true`, Process Action on both the client and service have the same activity ID.</span></span>  
  
## <a name="synchronous-requestreply-with-errors"></a><span data-ttu-id="e77b3-139">Request/reply sincrono con errori</span><span class="sxs-lookup"><span data-stu-id="e77b3-139">Synchronous Request/Reply with Errors</span></span>  
 <span data-ttu-id="e77b3-140">L'unica differenza rispetto allo scenario precedente è che viene restituito un messaggio di errore SOAP come messaggio di risposta.</span><span class="sxs-lookup"><span data-stu-id="e77b3-140">The only difference with the previous scenario is that a SOAP fault message is returned as a response message.</span></span> <span data-ttu-id="e77b3-141">Se `propagateActivity` = `true`, l'ID attività del messaggio di richiesta viene aggiunta al messaggio di errore SOAP.</span><span class="sxs-lookup"><span data-stu-id="e77b3-141">If `propagateActivity`=`true`, the activity ID of the request message is added to the SOAP fault message.</span></span>  
  
## <a name="synchronous-one-way-without-errors"></a><span data-ttu-id="e77b3-142">Unidirezionale sincrono senza errori</span><span class="sxs-lookup"><span data-stu-id="e77b3-142">Synchronous One-Way without Errors</span></span>  
 <span data-ttu-id="e77b3-143">L'unica differenza rispetto al primo scenario è che non viene restituito alcun messaggio al server.</span><span class="sxs-lookup"><span data-stu-id="e77b3-143">The only difference with the first scenario is that no message is returned to the server.</span></span> <span data-ttu-id="e77b3-144">Inoltre, per i protocolli basati su HTTP, il sistema invia al client uno stato che indica l'eventuale presenza di errori.</span><span class="sxs-lookup"><span data-stu-id="e77b3-144">For HTTP-based protocols, a status (valid or error) is still returned to the client.</span></span> <span data-ttu-id="e77b3-145">Questo avviene perché HTTP è l'unico protocollo avente una semantica request / reply che fa parte dello stack del protocollo WCF.</span><span class="sxs-lookup"><span data-stu-id="e77b3-145">This is because HTTP is the only protocol with a request-response semantics that is part of the WCF protocol stack.</span></span> <span data-ttu-id="e77b3-146">Poiché l'elaborazione TCP è nascosta da WCF, viene inviato alcun acknowledgement al client.</span><span class="sxs-lookup"><span data-stu-id="e77b3-146">Because TCP processing is hidden from WCF, no acknowledgement is sent to the client.</span></span>  
  
## <a name="synchronous-one-way-with-errors"></a><span data-ttu-id="e77b3-147">Unidirezionale sincrono con errori</span><span class="sxs-lookup"><span data-stu-id="e77b3-147">Synchronous One-Way with Errors</span></span>  
 <span data-ttu-id="e77b3-148">Se durante l'elaborazione del messaggio (Q o successivo) si verifica un errore, al client non viene restituita alcuna notifica.</span><span class="sxs-lookup"><span data-stu-id="e77b3-148">If an error occurs while processing the message (Q or beyond), no notification is returned to the client.</span></span> <span data-ttu-id="e77b3-149">Questo comportamento è identico allo scenario "Sincrono unidirezionale senza errori".</span><span class="sxs-lookup"><span data-stu-id="e77b3-149">This is identical to the "Synchronous One-Way without Errors" scenario.</span></span> <span data-ttu-id="e77b3-150">Se si desidera ricevere un messaggio di errore, evitare di utilizzare uno scenario unidirezionale.</span><span class="sxs-lookup"><span data-stu-id="e77b3-150">You should not use a One-Way scenario if you want to receive an error message.</span></span>  
  
## <a name="duplex"></a><span data-ttu-id="e77b3-151">Duplex</span><span class="sxs-lookup"><span data-stu-id="e77b3-151">Duplex</span></span>  
 <span data-ttu-id="e77b3-152">La differenza rispetto agli scenari precedenti è che il client, analogamente a un servizio di uno scenario asincrono, crea le attività "ReceiveBytes" e "ProcessMessage".</span><span class="sxs-lookup"><span data-stu-id="e77b3-152">The difference with the previous scenarios is that the client acts as a service, in which it creates the ReceiveBytes and ProcessMessage activities, similar to the Asynchronous scenarios.</span></span>
