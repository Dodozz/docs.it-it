---
title: Procedure consigliate per comunicazioni in coda
ms.date: 03/30/2017
helpviewer_keywords:
- queues [WCF], best practices
- best practices [WCF], queued communication
ms.assetid: 446a6383-cae3-4338-b193-a33c14a49948
ms.openlocfilehash: b2f64faab6df678182fb39174c8a558b298a8748
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/28/2019
ms.locfileid: "64584977"
---
# <a name="best-practices-for-queued-communication"></a><span data-ttu-id="bb0a7-102">Procedure consigliate per comunicazioni in coda</span><span class="sxs-lookup"><span data-stu-id="bb0a7-102">Best Practices for Queued Communication</span></span>
<span data-ttu-id="bb0a7-103">In questo argomento illustra le procedure consigliate per la comunicazione in coda in Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="bb0a7-103">This topic provides recommended practices for queued communication in Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="bb0a7-104">Nelle sezioni seguenti vengono descritte le procedure consigliate in funzione dello scenario.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-104">The following sections discuss recommended practices from a scenario perspective.</span></span>  
  
## <a name="fast-best-effort-queued-messaging"></a><span data-ttu-id="bb0a7-105">Messaggistica in coda di tipo veloce ed efficiente</span><span class="sxs-lookup"><span data-stu-id="bb0a7-105">Fast, Best-Effort Queued Messaging</span></span>  
 <span data-ttu-id="bb0a7-106">Per scenari che richiedono la separazione fornita dalla messaggistica in coda nonché velocità, elevate prestazioni ed efficienza, utilizzare una coda non transazionale e impostare la proprietà <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> su `false`.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-106">For scenarios that require separation that queued messaging provides and fast, high-performance messaging with best-effort assurances, use a non-transactional queue and set the <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> property to `false`.</span></span>  
  
 <span data-ttu-id="bb0a7-107">È inoltre possibile scegliere di non incorrere nell'onere delle scritture su disco impostando la proprietà <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> su `false`.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-107">In addition, you can choose not to incur the cost of disk writes by setting the <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> property to `false`.</span></span>  
  
 <span data-ttu-id="bb0a7-108">La protezione ha implicazioni sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-108">Security has implications on performance.</span></span> <span data-ttu-id="bb0a7-109">Per altre informazioni, vedere [considerazioni sulle prestazioni](../../../../docs/framework/wcf/feature-details/performance-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="bb0a7-109">For more information, see [Performance Considerations](../../../../docs/framework/wcf/feature-details/performance-considerations.md).</span></span>  
  
## <a name="reliable-end-to-end-queued-messaging"></a><span data-ttu-id="bb0a7-110">Messaggistica in coda end-to-end affidabile</span><span class="sxs-lookup"><span data-stu-id="bb0a7-110">Reliable End-to-End Queued Messaging</span></span>  
 <span data-ttu-id="bb0a7-111">Nelle sezioni seguenti vengono descritte le procedure consigliate per scenari che richiedono messaggistica affidabile end-to-end.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-111">The following sections describe recommended practices for scenarios that require end-to-end reliable messaging.</span></span>  
  
### <a name="basic-reliable-transfer"></a><span data-ttu-id="bb0a7-112">Trasferimento affidabile di base</span><span class="sxs-lookup"><span data-stu-id="bb0a7-112">Basic Reliable Transfer</span></span>  
 <span data-ttu-id="bb0a7-113">Per l'affidabilità end-to-end, impostare la proprietà <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> su `true` per garantire il trasferimento.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-113">For end-to-end reliability, set the <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> property to `true` to ensure transfer.</span></span> <span data-ttu-id="bb0a7-114">La proprietà <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> può essere impostata su `true` o `false` a seconda delle necessità (l'impostazione predefinita è `true`).</span><span class="sxs-lookup"><span data-stu-id="bb0a7-114">The <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> property can be set to `true` or `false` depending on your requirements (the default is `true`).</span></span> <span data-ttu-id="bb0a7-115">La proprietà <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> è generalmente impostata su `true` come parte dell'affidabilità end-to-end.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-115">Generally, the <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> property is set to `true` as part of end-to-end reliability.</span></span> <span data-ttu-id="bb0a7-116">Ciò implica un costo in termini di prestazioni, ma rende durevole il messaggio. In questo modo il messaggio non andrà perso se il gestore delle code si arresta in modo anomalo.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-116">The compromise is a performance cost, but makes the message durable so that the message is not lost if a queue manager crashes.</span></span>  
  
### <a name="use-of-transactions"></a><span data-ttu-id="bb0a7-117">Utilizzo delle transazioni</span><span class="sxs-lookup"><span data-stu-id="bb0a7-117">Use of Transactions</span></span>  
 <span data-ttu-id="bb0a7-118">È necessario utilizzare le transazioni per garantire l'affidabilità end-to-end.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-118">You must use transactions to ensure end-to-end reliability.</span></span> <span data-ttu-id="bb0a7-119">Le garanzie `ExactlyOnce` assicurano solo che i messaggi vengano recapitati alla coda di destinazione.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-119">`ExactlyOnce` assurances only ensure that messages are delivered to the target queue.</span></span> <span data-ttu-id="bb0a7-120">Per garantire che il messaggio venga ricevuto, utilizzare le transazioni.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-120">To ensure that the message is received, use transactions.</span></span> <span data-ttu-id="bb0a7-121">Se il servizio si arresta in modo anomalo e se si opera senza transazioni, è possibile che si verifichi la perdita del messaggio che sta per essere recapitato, ma che appare come effettivamente recapitato.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-121">Without transactions, if the service crashes, you lose the message that is being delivered but is actually delivered to the application.</span></span>  
  
### <a name="use-of-dead-letter-queues"></a><span data-ttu-id="bb0a7-122">Utilizzo delle code dei messaggi non recapitabili</span><span class="sxs-lookup"><span data-stu-id="bb0a7-122">Use of Dead-letter Queues</span></span>  
 <span data-ttu-id="bb0a7-123">Le code dei messaggi non recapitabili assicurano la ricezione di una notifica se un messaggio non viene recapitato alla coda di destinazione.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-123">Dead-letter queues ensure that you are notified if a message fails to be delivered to the target queue.</span></span> <span data-ttu-id="bb0a7-124">È possibile utilizzare la coda dei messaggi non recapitabili fornita dal sistema o una personalizzata.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-124">You can use the system-provided dead-letter queue or a custom dead-letter queue.</span></span> <span data-ttu-id="bb0a7-125">È generalmente consigliato l'utilizzo di una coda dei messaggi non recapitabili personalizzata poiché consente di inviare messaggi non recapitabili da una singola applicazione a un'unica coda dei messaggi non recapitabili.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-125">In general, using a custom dead-letter queue is best because it enables you to send dead-letter messages from one application into a single dead-letter queue.</span></span> <span data-ttu-id="bb0a7-126">In caso contrario, tutti i messaggi non recapitabili che si verificano per tutte le applicazioni in esecuzione nel sistema vengono recapitati a un'unica coda.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-126">Otherwise, all dead-letter messages that occur for all applications running on the system are delivered to a single queue.</span></span> <span data-ttu-id="bb0a7-127">Ogni applicazione deve quindi cercare nella coda dei messaggi non recapitabili per trovare quelli pertinenti per quell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-127">Each application must then search though the dead-letter queue to find the dead-letter messages that are relevant to that application.</span></span> <span data-ttu-id="bb0a7-128">L'utilizzo di una coda dei messaggi non recapitabili personalizzata a volte non è possibile, ad esempio quando si utilizza MSMQ 3.0.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-128">Sometimes, using a custom dead-letter queue is not feasible, such as when using MSMQ 3.0.</span></span>  
  
 <span data-ttu-id="bb0a7-129">La disattivazione delle code dei messaggi non recapitabili per la comunicazione affidabile end-to-end non è consigliata.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-129">Turning off dead-letter queues for end-to-end reliable communication is not recommended.</span></span>  
  
 <span data-ttu-id="bb0a7-130">Per altre informazioni, vedere [Usa le code di lettera non consegnata per gestire errori di trasferimento messaggi](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md).</span><span class="sxs-lookup"><span data-stu-id="bb0a7-130">For more information, see [Using Dead-Letter Queues to Handle Message Transfer Failures](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md).</span></span>  
  
### <a name="use-of-poison-message-handling"></a><span data-ttu-id="bb0a7-131">Utilizzo della gestione dei messaggi non elaborabili</span><span class="sxs-lookup"><span data-stu-id="bb0a7-131">Use of Poison-Message Handling</span></span>  
 <span data-ttu-id="bb0a7-132">La gestione dei messaggi non elaborabili consente il ripristino dopo un errore per proseguire l'elaborazione dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-132">Poison-message handling provides the ability to recover from the failure to process messages.</span></span>  
  
 <span data-ttu-id="bb0a7-133">Quando si utilizza la funzionalità di gestione dei messaggi non elaborabili, verificare che la proprietà <xref:System.ServiceModel.MsmqBindingBase.ReceiveErrorHandling%2A> sia impostata sul valore appropriato.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-133">When using the poison-message handling feature, ensure that the <xref:System.ServiceModel.MsmqBindingBase.ReceiveErrorHandling%2A> property is set to the appropriate value.</span></span> <span data-ttu-id="bb0a7-134">L'impostazione della proprietà su <xref:System.ServiceModel.ReceiveErrorHandling.Drop> significa che i dati vanno persi.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-134">Setting it to <xref:System.ServiceModel.ReceiveErrorHandling.Drop> means the data is lost.</span></span> <span data-ttu-id="bb0a7-135">L'impostazione della proprietà su <xref:System.ServiceModel.ReceiveErrorHandling.Fault> genera invece errori nell'host del servizio quando viene rilevato un messaggio non elaborabile.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-135">On the other hand, setting it to <xref:System.ServiceModel.ReceiveErrorHandling.Fault> faults the service host when it detects a poison message.</span></span> <span data-ttu-id="bb0a7-136">Se si utilizza MSMQ 3.0, <xref:System.ServiceModel.ReceiveErrorHandling.Fault> è l'opzione migliore per evitare perdite di dati e per spostare il messaggio non elaborabile.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-136">Using MSMQ 3.0, <xref:System.ServiceModel.ReceiveErrorHandling.Fault> is the best option to avoid data loss and move the poison message out of the way.</span></span> <span data-ttu-id="bb0a7-137">Se si utilizza MSMQ 4.0, <xref:System.ServiceModel.ReceiveErrorHandling.Move> costituisce l'approccio consigliato.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-137">Using MSMQ 4.0, <xref:System.ServiceModel.ReceiveErrorHandling.Move> is the recommended approach.</span></span> <span data-ttu-id="bb0a7-138">Il campo <xref:System.ServiceModel.ReceiveErrorHandling.Move> sposta un messaggio non elaborabile fuori dalla coda consentendo al servizio di proseguire nell'elaborazione di nuovi messaggi.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-138"><xref:System.ServiceModel.ReceiveErrorHandling.Move> moves a poisoned message out of the queue so the service can continue to process new messages.</span></span> <span data-ttu-id="bb0a7-139">Il servizio dei messaggi non elaborabili è in grado quindi di elaborare separatamente il messaggio non elaborabile.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-139">The poison-message service can then process the poison message separately.</span></span>  
  
 <span data-ttu-id="bb0a7-140">Per altre informazioni, vedere [messaggi non elaborabili](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span><span class="sxs-lookup"><span data-stu-id="bb0a7-140">For more information, see [Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span></span>  
  
## <a name="achieving-high-throughput"></a><span data-ttu-id="bb0a7-141">Raggiungimento di velocità effettive elevate</span><span class="sxs-lookup"><span data-stu-id="bb0a7-141">Achieving High Throughput</span></span>  
 <span data-ttu-id="bb0a7-142">Per raggiungere velocità effettive elevate in un singolo endpoint, utilizzare gli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="bb0a7-142">To achieve high throughput on a single endpoint, use the following:</span></span>  
  
- <span data-ttu-id="bb0a7-143">Batch transazionale.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-143">Transacted batching.</span></span> <span data-ttu-id="bb0a7-144">Il batch transazionale garantisce la lettura di molti messaggi in una singola transazione.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-144">Transacted batching ensures that many messages can be read in a single transaction.</span></span> <span data-ttu-id="bb0a7-145">In questo modo vengono ottimizzati i commit della transazione, aumentando le prestazioni complessive.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-145">This optimizes transaction commits, increasing overall performance.</span></span> <span data-ttu-id="bb0a7-146">Lo svantaggio del batch consiste nel fatto che se si verifica un errore in un singolo messaggio all'interno di un batch, verrà eseguito il rollback dell'intero batch e i messaggi dovranno essere elaborati uno alla volta fino a che il batch non sarà nuovamente sicuro.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-146">The cost of batching is that if a failure occurs in a single message within a batch, then the entire batch is rolled back and the messages must be processed one at a time until it is safe to batch again.</span></span> <span data-ttu-id="bb0a7-147">Nella maggior parte dei casi i messaggi non elaborabili sono rari, pertanto il batch è il modo preferito per aumentare le prestazioni del sistema, in particolare quando vi sono altri gestori delle risorse che partecipano alla transazione.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-147">In most cases, poison messages are rare, so batching is the preferred way to increase system performance, particularly when you have other resource managers that participate in the transaction.</span></span> <span data-ttu-id="bb0a7-148">Per altre informazioni, vedere [l'invio in batch di messaggi in una transazione](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md).</span><span class="sxs-lookup"><span data-stu-id="bb0a7-148">For more information, see [Batching Messages in a Transaction](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md).</span></span>  
  
- <span data-ttu-id="bb0a7-149">Concorrenza.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-149">Concurrency.</span></span> <span data-ttu-id="bb0a7-150">La concorrenza aumenta la velocità effettiva, ma può anche provocare conflitti nelle risorse condivise.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-150">Concurrency increases throughput, but concurrency also affects contention to shared resources.</span></span> <span data-ttu-id="bb0a7-151">Per altre informazioni, vedere [concorrenza](../../../../docs/framework/wcf/samples/concurrency.md).</span><span class="sxs-lookup"><span data-stu-id="bb0a7-151">For more information, see [Concurrency](../../../../docs/framework/wcf/samples/concurrency.md).</span></span>  
  
- <span data-ttu-id="bb0a7-152">Limitazione.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-152">Throttling.</span></span> <span data-ttu-id="bb0a7-153">Per ottenere prestazioni ottimali, limitare il numero di messaggi nella pipeline del dispatcher.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-153">For optimal performance, throttle the number of messages in the dispatcher pipeline.</span></span> <span data-ttu-id="bb0a7-154">Per un esempio di come eseguire questa operazione, vedere [limitazione](../../../../docs/framework/wcf/samples/throttling.md).</span><span class="sxs-lookup"><span data-stu-id="bb0a7-154">For an example of how to do this, see [Throttling](../../../../docs/framework/wcf/samples/throttling.md).</span></span>  
  
 <span data-ttu-id="bb0a7-155">Quando si utilizza il batch, è necessario sapere che la concorrenza e la limitazione danno luogo a batch simultanei.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-155">When using batching, be aware that concurrency and throttling translate to concurrent batches.</span></span>  
  
 <span data-ttu-id="bb0a7-156">Per ottenere velocità effettiva e disponibilità, usare una farm di servizi WCF che leggere dalla coda.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-156">To achieve higher throughput and availability, use a farm of WCF services that read from the queue.</span></span> <span data-ttu-id="bb0a7-157">In questo caso, tutti i servizi interessati devono esporre lo stesso contratto nello stesso endpoint.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-157">This requires that all of these services expose the same contract on the same endpoint.</span></span> <span data-ttu-id="bb0a7-158">L'approccio della farm funziona in modo ottimale per applicazioni che hanno elevate frequenze di produzione di messaggi poiché consente a un certo numero di servizi di leggere dalla stessa coda.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-158">The farm approach works best for applications that have high production rates of messages because it enables a number of services to all read from the same queue.</span></span>  
  
 <span data-ttu-id="bb0a7-159">Quando si utilizzano le farm, è necessario sapere che le letture transazionali remote non sono supportate in MSMQ 3.0.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-159">When using farms, be aware that MSMQ 3.0 does not support remote transacted reads.</span></span> <span data-ttu-id="bb0a7-160">MSMQ 4.0 supporta le letture transazionali remote.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-160">MSMQ 4.0 does support remote transacted reads.</span></span>  
  
 <span data-ttu-id="bb0a7-161">Per altre informazioni, vedere [l'invio in batch di messaggi in una transazione](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md) e [differenze nelle funzionalità di Accodamento in Windows Vista, Windows Server 2003 e Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span><span class="sxs-lookup"><span data-stu-id="bb0a7-161">For more information, see [Batching Messages in a Transaction](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md) and [Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span></span>  
  
## <a name="queuing-with-unit-of-work-semantics"></a><span data-ttu-id="bb0a7-162">Accodamento con unità di semantica del lavoro</span><span class="sxs-lookup"><span data-stu-id="bb0a7-162">Queuing with Unit of Work Semantics</span></span>  
 <span data-ttu-id="bb0a7-163">In alcuni scenari i messaggi raggruppati in una coda possono essere correlati insieme e, pertanto, il loro ordine è significativo.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-163">In some scenarios a group of messages in a queue may be related and, therefore, the ordering of these messages is significant.</span></span> <span data-ttu-id="bb0a7-164">In tali scenari, viene elaborato un gruppo di messaggi correlati come singola unità. Ciò significa che tutti i messaggi vengono elaborati correttamente oppure che nessun di essi viene elaborato.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-164">In such scenarios, process a group of related messages together as a single unit: either all of the messages are processed successfully or none are.</span></span> <span data-ttu-id="bb0a7-165">Per implementare tale comportamento, utilizzare sessioni con code.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-165">To implement such behavior, use sessions with queues.</span></span>  
  
 <span data-ttu-id="bb0a7-166">Per altre informazioni, vedere [raggruppamento di messaggi in coda in una sessione](../../../../docs/framework/wcf/feature-details/grouping-queued-messages-in-a-session.md).</span><span class="sxs-lookup"><span data-stu-id="bb0a7-166">For more information, see [Grouping Queued Messages in a Session](../../../../docs/framework/wcf/feature-details/grouping-queued-messages-in-a-session.md).</span></span>  
  
## <a name="correlating-request-reply-messages"></a><span data-ttu-id="bb0a7-167">Correlazione di messaggi request/reply</span><span class="sxs-lookup"><span data-stu-id="bb0a7-167">Correlating Request-Reply Messages</span></span>  
 <span data-ttu-id="bb0a7-168">Sebbene le code siano tipicamente unidirezionali, in alcuni scenari è necessario determinare una correlazione tra una risposta ricevuta a una richiesta inviata precedentemente.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-168">Though queues are typically one-way, in some scenarios you may want to correlate a reply received to a request sent earlier.</span></span> <span data-ttu-id="bb0a7-169">Se tale correlazione viene richiesta, è consigliato applicare al messaggio la propria intestazione del messaggio SOAP contenente informazioni sulla correlazione.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-169">If you require such correlation, it is recommended that you apply your own SOAP message header that contains correlation information with the message.</span></span> <span data-ttu-id="bb0a7-170">In genere, il mittente allega questa intestazione al messaggio e il destinatario, dopo aver elaborato il messaggio e aver risposto con un messaggio nuovo in una coda di risposte, allega l'intestazione del messaggio del mittente contenente le informazioni sulla correlazione così che il mittente possa identificare il messaggio di risposta con il messaggio di richiesta.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-170">Typically, the sender attaches this header with the message, and the receiver, upon processing the message and replying back with a new message on a reply queue, attaches the sender's message header that contains the correlation information so that the sender can identify the reply message with the request message.</span></span>  
  
## <a name="integrating-with-non-wcf-applications"></a><span data-ttu-id="bb0a7-171">Integrazione con applicazioni non WCF</span><span class="sxs-lookup"><span data-stu-id="bb0a7-171">Integrating with Non-WCF Applications</span></span>  
 <span data-ttu-id="bb0a7-172">Usare `MsmqIntegrationBinding` durante l'integrazione di servizi WCF o client con i servizi non WCF o client.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-172">Use `MsmqIntegrationBinding` when integrating WCF services or clients with non-WCF services or clients.</span></span> <span data-ttu-id="bb0a7-173">L'applicazione non WCF può essere un'applicazione MSMQ scritta utilizzando System. Messaging, COM+, Visual Basic o C++.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-173">The non-WCF application can be an MSMQ application written using System.Messaging, COM+, Visual Basic, or C++.</span></span>  
  
 <span data-ttu-id="bb0a7-174">Quando si utilizza `MsmqIntegrationBinding`, è necessario sapere che:</span><span class="sxs-lookup"><span data-stu-id="bb0a7-174">When using `MsmqIntegrationBinding`, be aware of the following:</span></span>  
  
- <span data-ttu-id="bb0a7-175">Il corpo del messaggio WCF non è quello utilizzato per il corpo del messaggio MSMQ.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-175">A WCF message body is not the same as a MSMQ message body.</span></span> <span data-ttu-id="bb0a7-176">Quando si invia un messaggio WCF utilizzando un'associazione in coda, il corpo del messaggio WCF viene posizionata all'interno di un messaggio MSMQ.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-176">When sending a WCF message using a queued binding, the WCF message body is placed inside of a MSMQ message.</span></span> <span data-ttu-id="bb0a7-177">L'infrastruttura MSMQ vede solo il messaggio MSMQ ignorando queste informazioni aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-177">The MSMQ infrastructure is oblivious to this extra information; it sees only the MSMQ message.</span></span>  
  
- <span data-ttu-id="bb0a7-178">`MsmqIntegrationBinding` supporta i tipi di serializzazione più comuni.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-178">`MsmqIntegrationBinding` supports popular serialization types.</span></span> <span data-ttu-id="bb0a7-179">In base al tipo di serializzazione, il tipo del corpo del messaggio generico, <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601>, prende parametri di tipo diverso.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-179">Based on the serialization type, the body type of the generic message, <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601>, takes different type parameters.</span></span> <span data-ttu-id="bb0a7-180"><xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.ByteArray>, ad esempio, richiede `MsmqMessage\<byte[]>`<xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.Stream> e `MsmqMessage<Stream>` richiede .</span><span class="sxs-lookup"><span data-stu-id="bb0a7-180">For example, <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.ByteArray> requires `MsmqMessage\<byte[]>` and <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.Stream> requires `MsmqMessage<Stream>`.</span></span>  
  
- <span data-ttu-id="bb0a7-181">Con la serializzazione XML, è possibile specificare il tipo conosciuto utilizzando il `KnownTypes` attributo la [ \<comportamento >](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md) elemento che viene quindi usato per determinare come deserializzare il messaggio XML.</span><span class="sxs-lookup"><span data-stu-id="bb0a7-181">With XML serialization, you can specify the known type using the `KnownTypes` attribute on the [\<behavior>](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md) element that is then used to determine how to deserialize the XML message.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bb0a7-182">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="bb0a7-182">See also</span></span>

- [<span data-ttu-id="bb0a7-183">Accodamento in WCF</span><span class="sxs-lookup"><span data-stu-id="bb0a7-183">Queuing in WCF</span></span>](../../../../docs/framework/wcf/feature-details/queuing-in-wcf.md)
- [<span data-ttu-id="bb0a7-184">Procedura: Lo scambio di messaggi in coda con endpoint WCF</span><span class="sxs-lookup"><span data-stu-id="bb0a7-184">How to: Exchange Queued Messages with WCF Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)
- [<span data-ttu-id="bb0a7-185">Procedura: Scambiare messaggi con endpoint WCF e le applicazioni di Accodamento messaggi</span><span class="sxs-lookup"><span data-stu-id="bb0a7-185">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)
- [<span data-ttu-id="bb0a7-186">Raggruppamento di messaggi in coda in una sessione</span><span class="sxs-lookup"><span data-stu-id="bb0a7-186">Grouping Queued Messages in a Session</span></span>](../../../../docs/framework/wcf/feature-details/grouping-queued-messages-in-a-session.md)
- [<span data-ttu-id="bb0a7-187">Invio in batch di messaggi in una transazione</span><span class="sxs-lookup"><span data-stu-id="bb0a7-187">Batching Messages in a Transaction</span></span>](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md)
- [<span data-ttu-id="bb0a7-188">Uso di code di messaggi non recapitabili per gestire gli errori di trasferimento dei messaggi</span><span class="sxs-lookup"><span data-stu-id="bb0a7-188">Using Dead-Letter Queues to Handle Message Transfer Failures</span></span>](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)
- [<span data-ttu-id="bb0a7-189">Gestione dei messaggi non elaborabili</span><span class="sxs-lookup"><span data-stu-id="bb0a7-189">Poison Message Handling</span></span>](../../../../docs/framework/wcf/feature-details/poison-message-handling.md)
- [<span data-ttu-id="bb0a7-190">Differenze nelle funzionalità di accodamento in Windows Vista, Windows Server 2003 e Windows XP</span><span class="sxs-lookup"><span data-stu-id="bb0a7-190">Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP</span></span>](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md)
- [<span data-ttu-id="bb0a7-191">Protezione dei messaggi mediante la sicurezza del trasporto</span><span class="sxs-lookup"><span data-stu-id="bb0a7-191">Securing Messages Using Transport Security</span></span>](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md)
- [<span data-ttu-id="bb0a7-192">Protezione dei messaggi mediante la sicurezza dei messaggi</span><span class="sxs-lookup"><span data-stu-id="bb0a7-192">Securing Messages Using Message Security</span></span>](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md)
- [<span data-ttu-id="bb0a7-193">Risoluzione dei problemi relativi ai messaggi in coda</span><span class="sxs-lookup"><span data-stu-id="bb0a7-193">Troubleshooting Queued Messaging</span></span>](../../../../docs/framework/wcf/feature-details/troubleshooting-queued-messaging.md)
