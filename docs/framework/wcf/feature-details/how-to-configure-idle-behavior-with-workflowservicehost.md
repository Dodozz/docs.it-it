---
title: 'Procedura: Configurare il comportamento inattivo con WorkflowServiceHost'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 1bb93652-d687-46ff-bff6-69ecdcf97437
ms.openlocfilehash: a676f03b4e6f9dd210b843a6f3bf00c735889500
ms.sourcegitcommit: 558d78d2a68acd4c95ef23231c8b4e4c7bac3902
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/09/2019
ms.locfileid: "59330155"
---
# <a name="how-to-configure-idle-behavior-with-workflowservicehost"></a><span data-ttu-id="ca49b-102">Procedura: Configurare il comportamento inattivo con WorkflowServiceHost</span><span class="sxs-lookup"><span data-stu-id="ca49b-102">How to: Configure Idle Behavior with WorkflowServiceHost</span></span>
<span data-ttu-id="ca49b-103">I flussi di lavoro diventano inattivi se incontrano un segnalibro che deve essere ripreso da uno stimolo esterno, ad esempio nel caso in cui l'istanza del flusso di lavoro sia in attesa di un messaggio da recapitare usando un'attività <xref:System.ServiceModel.Activities.Receive> .</span><span class="sxs-lookup"><span data-stu-id="ca49b-103">Workflows go idle when they encounter a bookmark that must be resumed by some external stimulus, for example when the workflow instance is waiting for a message to be delivered using a <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior> <span data-ttu-id="ca49b-104">è un comportamento che consente di specificare il tempo tra il momento in cui un'istanza del servizio diviene inattiva e quando l'istanza viene resa persistente o scaricata.</span><span class="sxs-lookup"><span data-stu-id="ca49b-104">is a behavior that allows you to specify the time between when a service instance goes idle and when the instance is persisted or unloaded.</span></span> <span data-ttu-id="ca49b-105">Contiene due proprietà che consentono di impostare questi intervalli di tempo.</span><span class="sxs-lookup"><span data-stu-id="ca49b-105">It contains two properties that enable you to set these time spans.</span></span> <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> <span data-ttu-id="ca49b-106">Specifica l'intervallo di tempo tra quando un'istanza del servizio del flusso di lavoro diviene inattiva e quando l'istanza del servizio del flusso di lavoro è persistente.</span><span class="sxs-lookup"><span data-stu-id="ca49b-106">specifies the time span between when a workflow service instance goes idle and when the workflow service instance is persisted.</span></span> <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> <span data-ttu-id="ca49b-107">Specifica l'intervallo di tempo tra l'istanza del servizio un flusso di lavoro quando diventa inattivo e quando l'istanza del servizio del flusso di lavoro viene scaricato, dove unload indica renda persistente l'istanza nell'archivio di istanze e rimossa dalla memoria.</span><span class="sxs-lookup"><span data-stu-id="ca49b-107">specifies the time span between when a workflow service instance goes idle and when the workflow service instance is unloaded, where unload means persisting the instance to the instance store and removing it from memory.</span></span> <span data-ttu-id="ca49b-108">In questo argomento viene illustrato come configurare <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior> in un file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="ca49b-108">This topic explains how to configure the <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior> in a configuration file.</span></span>  
  
### <a name="to-configure-workflowidlebehavior"></a><span data-ttu-id="ca49b-109">Per configurare WorkflowIdleBehavior</span><span class="sxs-lookup"><span data-stu-id="ca49b-109">To configure WorkflowIdleBehavior</span></span>  
  
1. <span data-ttu-id="ca49b-110">Aggiungere un <`workflowIdle`> elemento per il <`behavior`> elemento all'interno di <`serviceBehaviors`> elemento, come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="ca49b-110">Add a <`workflowIdle`> element to the <`behavior`> element within the <`serviceBehaviors`> element as shown in the following example.</span></span>  
  
    ```xml  
    <behaviors>  
      <serviceBehaviors>  
        <behavior name="">  
          <workflowIdle timeToUnload="0:05:0" timeToPersist="0:04:0"/>   
        </behavior>  
      </serviceBehaviors>  
    </behaviors>  
    ```  
  
     <span data-ttu-id="ca49b-111">L'attributo `timeToUnload` specifica il periodo di tempo compreso tra il momento in cui un'istanza di servizio del flusso di lavoro diviene inattiva e il momento in cui il servizio flusso di lavoro viene scaricato.</span><span class="sxs-lookup"><span data-stu-id="ca49b-111">The `timeToUnload` attribute specifies the time period between when a workflow service instance goes idle and when the workflow service is unloaded.</span></span> <span data-ttu-id="ca49b-112">L'attributo `timeToPersist` specifica il periodo di tempo compreso tra il momento in cui un'istanza del servizio flusso di lavoro diviene inattiva e il momento in cui l'istanza del servizio flusso di lavoro è persistente.</span><span class="sxs-lookup"><span data-stu-id="ca49b-112">The `timeToPersist` attribute specifies the time period between when a workflow service instance goes idle and when the workflow service instance is persisted.</span></span> <span data-ttu-id="ca49b-113">Il valore predefinito per `timeToUnload` è 1 minuto.</span><span class="sxs-lookup"><span data-stu-id="ca49b-113">The default value for `timeToUnload` is 1 minute.</span></span> <span data-ttu-id="ca49b-114">Il valore predefinito per la proprietà `timeToPersist` è <xref:System.TimeSpan.MaxValue>.</span><span class="sxs-lookup"><span data-stu-id="ca49b-114">The default value for `timeToPersist` is <xref:System.TimeSpan.MaxValue>.</span></span> <span data-ttu-id="ca49b-115">Se si desidera mantenere le istanze inattive in memoria ma renderle persistenti per motivi di affidabilità, impostare i valori in modo tale che `timeToPersist` < `timeToUnload`.</span><span class="sxs-lookup"><span data-stu-id="ca49b-115">If you want to keep idle instances in memory but persist them for robustness, set values so that `timeToPersist` < `timeToUnload`.</span></span> <span data-ttu-id="ca49b-116">Se si desidera impedire lo scaricamento delle istanze inattive, impostare `timeToUnload` su <xref:System.TimeSpan.MaxValue>.</span><span class="sxs-lookup"><span data-stu-id="ca49b-116">If you want to prevent idle instances from being unloaded, set `timeToUnload` to <xref:System.TimeSpan.MaxValue>.</span></span> <span data-ttu-id="ca49b-117">Per altre informazioni sulle <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior>, vedere [Workflow Service Host Extensibility](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)</span><span class="sxs-lookup"><span data-stu-id="ca49b-117">For more information about <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior>, see [Workflow Service Host Extensibility](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="ca49b-118">L'esempio di configurazione precedente usa la configurazione semplificata.</span><span class="sxs-lookup"><span data-stu-id="ca49b-118">The preceding configuration sample is using simplified configuration.</span></span> <span data-ttu-id="ca49b-119">Per altre informazioni, vedere [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="ca49b-119">For more information, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).</span></span>  
  
### <a name="to-change-idle-behavior-in-code"></a><span data-ttu-id="ca49b-120">Per modificare il comportamento inattivo nel codice</span><span class="sxs-lookup"><span data-stu-id="ca49b-120">To change idle behavior in code</span></span>  
  
-   <span data-ttu-id="ca49b-121">Nell'esempio seguente viene modificato il tempo di attesa prima della persistenza e dello scaricamento a livello di codice.</span><span class="sxs-lookup"><span data-stu-id="ca49b-121">The following example changes the time to wait before persisting and unloading programmatically.</span></span>  
  
     [!code-csharp[Wf_SvcHost_Idle_persist#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/wf_svchost_idle_persist/cs/source.cs#1)]
     [!code-vb[Wf_SvcHost_Idle_persist#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/wf_svchost_idle_persist/vb/source.vb#1)]  
  
## <a name="see-also"></a><span data-ttu-id="ca49b-122">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="ca49b-122">See also</span></span>

- [<span data-ttu-id="ca49b-123">Estensibilità host del servizio flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="ca49b-123">Workflow Service Host Extensibility</span></span>](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)
- [<span data-ttu-id="ca49b-124">Configurazione semplificata</span><span class="sxs-lookup"><span data-stu-id="ca49b-124">Simplified Configuration</span></span>](../../../../docs/framework/wcf/simplified-configuration.md)
- [<span data-ttu-id="ca49b-125">Servizi flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="ca49b-125">Workflow Services</span></span>](../../../../docs/framework/wcf/feature-details/workflow-services.md)
