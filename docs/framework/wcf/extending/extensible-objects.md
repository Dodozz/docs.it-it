---
title: Oggetti estensibili
ms.date: 03/30/2017
helpviewer_keywords:
- extensible objects [WCF]
ms.assetid: bc88cefc-31fb-428e-9447-6d20a7d452af
ms.openlocfilehash: 1af44f2394bbf27f9219831612b4e73d7a1759e1
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 04/18/2019
ms.locfileid: "59220279"
---
# <a name="extensible-objects"></a><span data-ttu-id="788a7-102">Oggetti estensibili</span><span class="sxs-lookup"><span data-stu-id="788a7-102">Extensible Objects</span></span>
<span data-ttu-id="788a7-103">Questo modello viene usato per estendere le classi di runtime esistenti con nuove funzionalità oppure per aggiungere un nuovo stato a un oggetto.</span><span class="sxs-lookup"><span data-stu-id="788a7-103">The extensible object pattern is used to either extend existing runtime classes with new functionality or to add new state to an object.</span></span> <span data-ttu-id="788a7-104">Le estensioni, allegate a uno degli oggetti estensibili, attivano i comportamenti in fasi molto diverse dell'elaborazione per accedere a stato e funzionalità condivisi allegati a un oggetto estensibile comune al quale possono accedere.</span><span class="sxs-lookup"><span data-stu-id="788a7-104">Extensions, attached to one of the extensible objects, enable behaviors at very different stages in processing to access shared state and functionality attached to a common extensible object that they can access.</span></span>  
  
## <a name="the-iextensibleobjectt-pattern"></a><span data-ttu-id="788a7-105">Modello IExtensibleObject\<T > modello</span><span class="sxs-lookup"><span data-stu-id="788a7-105">The IExtensibleObject\<T> Pattern</span></span>  
 <span data-ttu-id="788a7-106">Nel modello di oggetti estensibili sono disponibili tre interfacce: <xref:System.ServiceModel.IExtensibleObject%601>, <xref:System.ServiceModel.IExtension%601> e <xref:System.ServiceModel.IExtensionCollection%601>.</span><span class="sxs-lookup"><span data-stu-id="788a7-106">There are three interfaces in the extensible object pattern: <xref:System.ServiceModel.IExtensibleObject%601>, <xref:System.ServiceModel.IExtension%601>, and <xref:System.ServiceModel.IExtensionCollection%601>.</span></span>  
  
 <span data-ttu-id="788a7-107">L'interfaccia <xref:System.ServiceModel.IExtensibleObject%601> viene implementata dai tipi che consentono agli oggetti <xref:System.ServiceModel.IExtension%601> di personalizzare la funzionalità.</span><span class="sxs-lookup"><span data-stu-id="788a7-107">The <xref:System.ServiceModel.IExtensibleObject%601> interface is implemented by types that allow <xref:System.ServiceModel.IExtension%601> objects to customize their functionality.</span></span>  
  
 <span data-ttu-id="788a7-108">Gli oggetti estendibili consentono l'aggregazione dinamica di oggetti <xref:System.ServiceModel.IExtension%601>.</span><span class="sxs-lookup"><span data-stu-id="788a7-108">Extensible objects allow dynamic aggregation of <xref:System.ServiceModel.IExtension%601> objects.</span></span> <span data-ttu-id="788a7-109">Gli oggetti <xref:System.ServiceModel.IExtension%601> sono caratterizzati dall'interfaccia seguente:</span><span class="sxs-lookup"><span data-stu-id="788a7-109"><xref:System.ServiceModel.IExtension%601> objects are characterized by the following interface:</span></span>  
  
```  
public interface IExtension<T>  
where T : IExtensibleObject<T>  
{  
    void Attach(T owner);  
    void Detach(T owner);  
}  
```  
  
 <span data-ttu-id="788a7-110">Tramite la restrizione dei tipi è possibile garantire che le estensioni possano essere definite solo per le classi <xref:System.ServiceModel.IExtensibleObject%601>.</span><span class="sxs-lookup"><span data-stu-id="788a7-110">The type restriction guarantees that extensions can only be defined for classes that are <xref:System.ServiceModel.IExtensibleObject%601>.</span></span> <span data-ttu-id="788a7-111"><xref:System.ServiceModel.IExtension%601.Attach%2A> e <xref:System.ServiceModel.IExtension%601.Detach%2A> forniscono la notifica dell'aggregazione o disaggregazione.</span><span class="sxs-lookup"><span data-stu-id="788a7-111"><xref:System.ServiceModel.IExtension%601.Attach%2A> and <xref:System.ServiceModel.IExtension%601.Detach%2A> provide notification of aggregation or disaggregation.</span></span>  
  
 <span data-ttu-id="788a7-112">È consigliabile limitare le implementazioni quando possono essere aggiunte e rimosse da un proprietario.</span><span class="sxs-lookup"><span data-stu-id="788a7-112">It is valid for implementations to restrict when they may be added and removed from an owner.</span></span> <span data-ttu-id="788a7-113">Ad esempio, è possibile impedire completamente la rimozione, impedire l'aggiunta o la rimozione delle estensioni quando il proprietario o l'estensione sono in un determinato stato, impedire l'aggiunta contemporaneamente a più proprietari o consentire solo una singola aggiunta seguita da una singola rimozione.</span><span class="sxs-lookup"><span data-stu-id="788a7-113">For example, you can disallow removal entirely, disallowing adding or removing extensions when the owner or extension are in a certain state, disallow adding to multiple owners concurrently, or allow only a single addition followed by a single remove.</span></span>  
  
 <span data-ttu-id="788a7-114"><xref:System.ServiceModel.IExtension%601> non implica alcuna interazione con le altre interfacce standard gestite.</span><span class="sxs-lookup"><span data-stu-id="788a7-114"><xref:System.ServiceModel.IExtension%601> does not imply any interactions with other standard managed interfaces.</span></span> <span data-ttu-id="788a7-115">In particolare, il metodo <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> sull'oggetto proprietario in genere non disconnette le relative estensioni.</span><span class="sxs-lookup"><span data-stu-id="788a7-115">Specifically, the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method on the owner object does not normally detach its extensions.</span></span>  
  
 <span data-ttu-id="788a7-116">Quando si aggiunge un'estensione alla raccolta, il metodo <xref:System.ServiceModel.IExtension%601.Attach%2A> viene chiamato prima dell'aggiunta alla raccolta.</span><span class="sxs-lookup"><span data-stu-id="788a7-116">When an extension is added to the collection, <xref:System.ServiceModel.IExtension%601.Attach%2A> is called before it goes into the collection.</span></span> <span data-ttu-id="788a7-117">Quando si rimuove un'estensione dalla raccolta, il metodo <xref:System.ServiceModel.IExtension%601.Detach%2A> viene chiamato dopo la rimozione.</span><span class="sxs-lookup"><span data-stu-id="788a7-117">When an extension is removed from the collection, <xref:System.ServiceModel.IExtension%601.Detach%2A> is called after it is removed.</span></span> <span data-ttu-id="788a7-118">Ciò significa che (presupponendo che la sincronizzazione avvenga correttamente) un'estensione può essere disponibile nella raccolta solo tra <xref:System.ServiceModel.IExtension%601.Attach%2A> e <xref:System.ServiceModel.IExtension%601.Detach%2A>.</span><span class="sxs-lookup"><span data-stu-id="788a7-118">This means (assuming appropriate synchronization) an extension can count on only being found in the collection while it is between <xref:System.ServiceModel.IExtension%601.Attach%2A> and <xref:System.ServiceModel.IExtension%601.Detach%2A>.</span></span>  
  
 <span data-ttu-id="788a7-119">L'oggetto passato al metodo <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> o al metodo <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> non deve necessariamente essere <xref:System.ServiceModel.IExtension%601> (ad esempio, è possibile passare qualsiasi oggetto), ma l'estensione restituita è un'interfaccia <xref:System.ServiceModel.IExtension%601>.</span><span class="sxs-lookup"><span data-stu-id="788a7-119">The object passed to <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> or <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> need not be <xref:System.ServiceModel.IExtension%601> (for example, you can pass any object), but the returned extension is an <xref:System.ServiceModel.IExtension%601>.</span></span>  
  
 <span data-ttu-id="788a7-120">Se nessuna estensione nella raccolta è un' <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> restituisce null, e <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> restituisce una raccolta vuota.</span><span class="sxs-lookup"><span data-stu-id="788a7-120">If no extension in the collection is an <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> returns null, and <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> returns an empty collection.</span></span> <span data-ttu-id="788a7-121">Se più estensioni implementano <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> restituisce una di esse.</span><span class="sxs-lookup"><span data-stu-id="788a7-121">If multiple extensions implement <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> returns one of them.</span></span> <span data-ttu-id="788a7-122">Il valore restituito dal metodo <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> è un'istantanea.</span><span class="sxs-lookup"><span data-stu-id="788a7-122">The value returned from <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> is a snapshot.</span></span>
  
 <span data-ttu-id="788a7-123">Sono disponibili due scenari principali.</span><span class="sxs-lookup"><span data-stu-id="788a7-123">There are two main scenarios.</span></span> <span data-ttu-id="788a7-124">Nel primo scenario la proprietà <xref:System.ServiceModel.IExtensibleObject%601.Extensions%2A> viene usa come un dizionario basato sui tipi per inserire lo stato su un oggetto allo scopo di consentire a un altro componente di ricercarlo usando il tipo.</span><span class="sxs-lookup"><span data-stu-id="788a7-124">The first scenario uses the <xref:System.ServiceModel.IExtensibleObject%601.Extensions%2A> property as a type-based dictionary to insert state on an object to enable another component to look it up using the type.</span></span>  
  
 <span data-ttu-id="788a7-125">Nel secondo scenario vengono usate le proprietà <xref:System.ServiceModel.IExtension%601.Attach%2A> e <xref:System.ServiceModel.IExtension%601.Detach%2A> per consentire a un oggetto di partecipare a un comportamento personalizzato, ad esempio la registrazione per gli eventi, il controllo delle transizioni di stato e così via.</span><span class="sxs-lookup"><span data-stu-id="788a7-125">The second scenario uses the <xref:System.ServiceModel.IExtension%601.Attach%2A> and <xref:System.ServiceModel.IExtension%601.Detach%2A> properties to enable an object to participate in custom behavior, such as registering for events, watching state transitions, and so on.</span></span>  
  
 <span data-ttu-id="788a7-126">L'interfaccia <xref:System.ServiceModel.IExtensionCollection%601> è una raccolta degli oggetti <xref:System.ServiceModel.IExtension%601> che consentono il recupero di <xref:System.ServiceModel.IExtension%601> in base al tipo.</span><span class="sxs-lookup"><span data-stu-id="788a7-126">The <xref:System.ServiceModel.IExtensionCollection%601> interface is a collection of the <xref:System.ServiceModel.IExtension%601> objects that allow for retrieving the <xref:System.ServiceModel.IExtension%601> by its type.</span></span> <span data-ttu-id="788a7-127"><xref:System.ServiceModel.IExtensionCollection%601.Find%2A?displayProperty=nameWithType> restituisce l'ultimo oggetto aggiunto che è un oggetto <xref:System.ServiceModel.IExtension%601> di quel tipo.</span><span class="sxs-lookup"><span data-stu-id="788a7-127"><xref:System.ServiceModel.IExtensionCollection%601.Find%2A?displayProperty=nameWithType> returns the most recently added object that is an <xref:System.ServiceModel.IExtension%601> of that type.</span></span>  
  
### <a name="extensible-objects-in-windows-communication-foundation"></a><span data-ttu-id="788a7-128">Oggetti estensibili in Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="788a7-128">Extensible Objects in Windows Communication Foundation</span></span>  
 <span data-ttu-id="788a7-129">Esistono quattro oggetti estensibili in Windows Communication Foundation (WCF):</span><span class="sxs-lookup"><span data-stu-id="788a7-129">There are four extensible objects in Windows Communication Foundation (WCF):</span></span>  
  
-   <span data-ttu-id="788a7-130"><xref:System.ServiceModel.ServiceHostBase>: è la classe base per l'host del servizio.</span><span class="sxs-lookup"><span data-stu-id="788a7-130"><xref:System.ServiceModel.ServiceHostBase> – This is the base class for the service’s host.</span></span>  <span data-ttu-id="788a7-131">Le estensioni di questa classe possono essere usate per estendere il comportamento di <xref:System.ServiceModel.ServiceHostBase> o per archiviare lo stato per ogni servizio.</span><span class="sxs-lookup"><span data-stu-id="788a7-131">Extensions of this class can be used to extend the behavior of the <xref:System.ServiceModel.ServiceHostBase> itself or to store the state for each service.</span></span>  
  
-   <span data-ttu-id="788a7-132"><xref:System.ServiceModel.InstanceContext>: questa classe collega un'istanza del tipo del servizio con il runtime del servizio.</span><span class="sxs-lookup"><span data-stu-id="788a7-132"><xref:System.ServiceModel.InstanceContext> – This class connects an instance of the service’s type with the service runtime.</span></span>  <span data-ttu-id="788a7-133">Contiene informazioni sull'istanza e un riferimento alla classe <xref:System.ServiceModel.InstanceContext> che contiene la classe <xref:System.ServiceModel.ServiceHostBase>.</span><span class="sxs-lookup"><span data-stu-id="788a7-133">It contains information about the instance as well as a reference to the <xref:System.ServiceModel.InstanceContext>'s containing <xref:System.ServiceModel.ServiceHostBase>.</span></span> <span data-ttu-id="788a7-134">Le estensioni di questa classe possono essere usate per estendere il comportamento di <xref:System.ServiceModel.InstanceContext> o per archiviare lo stato per ogni servizio.</span><span class="sxs-lookup"><span data-stu-id="788a7-134">Extensions of this class can be used to extend the behavior of the <xref:System.ServiceModel.InstanceContext> or to store the state for each service.</span></span>  
  
-   <span data-ttu-id="788a7-135"><xref:System.ServiceModel.OperationContext>: questa classe rappresenta le informazioni dell'operazione che il runtime raccoglie per ogni operazione.</span><span class="sxs-lookup"><span data-stu-id="788a7-135"><xref:System.ServiceModel.OperationContext> – This class represents the operation information that the runtime gathers for each operation.</span></span>  <span data-ttu-id="788a7-136">Tra queste informazioni sono incluse le intestazioni dei messaggi in arrivo, le proprietà dei messaggi in arrivo, l'identità di sicurezza dei messaggi in arrivo e altre informazioni.</span><span class="sxs-lookup"><span data-stu-id="788a7-136">This includes information such as the incoming message headers, the incoming message properties, the incoming security identity, and other information.</span></span>  <span data-ttu-id="788a7-137">Le estensioni di questa classe possono estendere il comportamento di <xref:System.ServiceModel.OperationContext> o archiviare lo stato per ogni operazione.</span><span class="sxs-lookup"><span data-stu-id="788a7-137">Extensions of this class can either extend the behavior of <xref:System.ServiceModel.OperationContext> or store the state for each operation.</span></span>  
  
-   <span data-ttu-id="788a7-138"><xref:System.ServiceModel.IContextChannel> : Questa interfaccia consente l'ispezione di ogni stato per i canali e i proxy compilati dal runtime di WCF.</span><span class="sxs-lookup"><span data-stu-id="788a7-138"><xref:System.ServiceModel.IContextChannel> – This interface allows for the inspection of each state for the channels and proxies built by the WCF runtime.</span></span>  <span data-ttu-id="788a7-139">Le estensioni di questa classe possono estendere il comportamento di <xref:System.ServiceModel.IClientChannel> o usarlo per archiviare lo stato per ogni canale.</span><span class="sxs-lookup"><span data-stu-id="788a7-139">Extensions of this class can either extend the behavior of <xref:System.ServiceModel.IClientChannel> or can use it to store the state for each channel.</span></span>  
  
-  
  
 <span data-ttu-id="788a7-140">Nell'esempio di codice seguente viene illustrato l'uso di un'estensione semplice per tenere traccia degli oggetti <xref:System.ServiceModel.InstanceContext>.</span><span class="sxs-lookup"><span data-stu-id="788a7-140">The following code example shows the use of a simple extension to track <xref:System.ServiceModel.InstanceContext> objects.</span></span>  
  
 [!code-csharp[IInstanceContextInitializer#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/iinstancecontextinitializer/cs/initializer.cs#1)]  
  
## <a name="see-also"></a><span data-ttu-id="788a7-141">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="788a7-141">See also</span></span>

- <xref:System.ServiceModel.IExtensibleObject%601>
- <xref:System.ServiceModel.IExtension%601>
- <xref:System.ServiceModel.IExtensionCollection%601>
