---
title: Scrittura del contenuto di dataset come dati XML
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: fd15f8a5-3b4c-46d0-a561-4559ab2a4705
ms.openlocfilehash: dae044a9d7802e858f1f24dd4aa0f1de8f6cba7a
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 04/18/2019
ms.locfileid: "59158951"
---
# <a name="writing-dataset-contents-as-xml-data"></a><span data-ttu-id="01a38-102">Scrittura del contenuto di dataset come dati XML</span><span class="sxs-lookup"><span data-stu-id="01a38-102">Writing DataSet Contents as XML Data</span></span>
<span data-ttu-id="01a38-103">In ADO.NET è possibile scrivere una rappresentazione XML di un <xref:System.Data.DataSet>, con o senza schema.</span><span class="sxs-lookup"><span data-stu-id="01a38-103">In ADO.NET you can write an XML representation of a <xref:System.Data.DataSet>, with or without its schema.</span></span> <span data-ttu-id="01a38-104">Se le informazioni relative allo schema sono incluse inline con il flusso o documento XML, tali informazioni verranno scritte usando il linguaggio XSD (XML Schema Definition Language).</span><span class="sxs-lookup"><span data-stu-id="01a38-104">If schema information is included inline with the XML, it is written using the XML Schema definition language (XSD).</span></span> <span data-ttu-id="01a38-105">Nello schema sono contenute le definizioni delle tabelle del <xref:System.Data.DataSet>, oltre alle definizioni delle relazioni e dei vincoli.</span><span class="sxs-lookup"><span data-stu-id="01a38-105">The schema contains the table definitions of the <xref:System.Data.DataSet> as well as the relation and constraint definitions.</span></span>  
  
 <span data-ttu-id="01a38-106">Quando un <xref:System.Data.DataSet> viene scritto sotto forma di dati XML, le righe del <xref:System.Data.DataSet> vengono scritte usando le versioni correnti.</span><span class="sxs-lookup"><span data-stu-id="01a38-106">When a <xref:System.Data.DataSet> is written as XML data, the rows in the <xref:System.Data.DataSet> are written in their current versions.</span></span> <span data-ttu-id="01a38-107">È tuttavia possibile scrivere un <xref:System.Data.DataSet> in formato DiffGram, in modo da consentire l'inclusione sia dei valori correnti che dei valori originali delle righe.</span><span class="sxs-lookup"><span data-stu-id="01a38-107">However, the <xref:System.Data.DataSet> can also be written as a DiffGram so that both the current and the original values of the rows will be included.</span></span>  
  
 <span data-ttu-id="01a38-108">La rappresentazione XML del <xref:System.Data.DataSet> possono essere scritti in un file, un flusso, un **XmlWriter**, o una stringa.</span><span class="sxs-lookup"><span data-stu-id="01a38-108">The XML representation of the <xref:System.Data.DataSet> can be written to a file, a stream, an **XmlWriter**, or a string.</span></span> <span data-ttu-id="01a38-109">Queste opzioni forniscono una notevole flessibilità per la modalità di trasporto della rappresentazione XML del <xref:System.Data.DataSet>.</span><span class="sxs-lookup"><span data-stu-id="01a38-109">These choices provide great flexibility for how you transport the XML representation of the <xref:System.Data.DataSet>.</span></span> <span data-ttu-id="01a38-110">Per ottenere la rappresentazione XML del <xref:System.Data.DataSet> sotto forma di stringa, usare il **GetXml** metodo come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="01a38-110">To obtain the XML representation of the <xref:System.Data.DataSet> as a string, use the **GetXml** method as shown in the following example.</span></span>  
  
```vb  
Dim xmlDS As String = custDS.GetXml()  
```  
  
```csharp  
string xmlDS = custDS.GetXml();  
```  
  
 <span data-ttu-id="01a38-111">**GetXml** restituisce la rappresentazione XML del <xref:System.Data.DataSet> senza informazioni sullo schema.</span><span class="sxs-lookup"><span data-stu-id="01a38-111">**GetXml** returns the XML representation of the <xref:System.Data.DataSet> without schema information.</span></span> <span data-ttu-id="01a38-112">Per scrivere le informazioni sullo schema di <xref:System.Data.DataSet> (come XML Schema) a una stringa, usare **GetXmlSchema**.</span><span class="sxs-lookup"><span data-stu-id="01a38-112">To write the schema information from the <xref:System.Data.DataSet> (as XML Schema) to a string, use **GetXmlSchema**.</span></span>  
  
 <span data-ttu-id="01a38-113">Per scrivere un <xref:System.Data.DataSet> in un file, flusso, o **XmlWriter**, usare i **WriteXml** (metodo).</span><span class="sxs-lookup"><span data-stu-id="01a38-113">To write a <xref:System.Data.DataSet> to a file, stream, or **XmlWriter**, use the **WriteXml** method.</span></span> <span data-ttu-id="01a38-114">Il primo parametro passato a **WriteXml** costituisce la destinazione dell'output XML.</span><span class="sxs-lookup"><span data-stu-id="01a38-114">The first parameter you pass to **WriteXml** is the destination of the XML output.</span></span> <span data-ttu-id="01a38-115">Ad esempio, passare una stringa contenente un nome file, un **TextWriter** oggetto e così via.</span><span class="sxs-lookup"><span data-stu-id="01a38-115">For example, pass a string containing a file name, a **System.IO.TextWriter** object, and so on.</span></span> <span data-ttu-id="01a38-116">È possibile passare un secondo parametro facoltativo di un **XmlWriteMode** per specificare come deve essere scritto l'output XML.</span><span class="sxs-lookup"><span data-stu-id="01a38-116">You can pass an optional second parameter of an **XmlWriteMode** to specify how the XML output is to be written.</span></span>  
  
 <span data-ttu-id="01a38-117">La tabella seguente illustra le opzioni per la **XmlWriteMode**.</span><span class="sxs-lookup"><span data-stu-id="01a38-117">The following table shows the options for **XmlWriteMode**.</span></span>  
  
|<span data-ttu-id="01a38-118">Opzione XmlWriteMode</span><span class="sxs-lookup"><span data-stu-id="01a38-118">XmlWriteMode option</span></span>|<span data-ttu-id="01a38-119">Descrizione</span><span class="sxs-lookup"><span data-stu-id="01a38-119">Description</span></span>|  
|-------------------------|-----------------|  
|<span data-ttu-id="01a38-120">**IgnoreSchema**</span><span class="sxs-lookup"><span data-stu-id="01a38-120">**IgnoreSchema**</span></span>|<span data-ttu-id="01a38-121">Scrive i contenuti correnti del <xref:System.Data.DataSet> sotto forma di dati XML, senza schema XML.</span><span class="sxs-lookup"><span data-stu-id="01a38-121">Writes the current contents of the <xref:System.Data.DataSet> as XML data, without an XML Schema.</span></span> <span data-ttu-id="01a38-122">Questa è l'impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="01a38-122">This is the default.</span></span>|  
|<span data-ttu-id="01a38-123">**WriteSchema**</span><span class="sxs-lookup"><span data-stu-id="01a38-123">**WriteSchema**</span></span>|<span data-ttu-id="01a38-124">Scrive il contenuto corrente dell'oggetto <xref:System.Data.DataSet> come dati XML con la struttura relazionale come XML Schema inline.</span><span class="sxs-lookup"><span data-stu-id="01a38-124">Writes the current contents of the <xref:System.Data.DataSet> as XML data with the relational structure as inline XML Schema.</span></span>|  
|<span data-ttu-id="01a38-125">**DiffGram**</span><span class="sxs-lookup"><span data-stu-id="01a38-125">**DiffGram**</span></span>|<span data-ttu-id="01a38-126">Scrive l'intero oggetto <xref:System.Data.DataSet> come DiffGram, inclusi i valori originali e quelli correnti.</span><span class="sxs-lookup"><span data-stu-id="01a38-126">Writes the entire <xref:System.Data.DataSet> as a DiffGram, including original and current values.</span></span> <span data-ttu-id="01a38-127">Per altre informazioni, vedere [DiffGram](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/diffgrams.md).</span><span class="sxs-lookup"><span data-stu-id="01a38-127">For more information, see [DiffGrams](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/diffgrams.md).</span></span>|  
  
 <span data-ttu-id="01a38-128">Quando si scrive una rappresentazione XML di un <xref:System.Data.DataSet> che contiene **DataRelation** oggetti, è probabile che si desideri il codice XML risultante siano presenti le righe figlio di ogni relazione annidata all'interno dei relativi elementi padre.</span><span class="sxs-lookup"><span data-stu-id="01a38-128">When writing an XML representation of a <xref:System.Data.DataSet> that contains **DataRelation** objects, you will most likely want the resulting XML to have the child rows of each relation nested within their related parent elements.</span></span> <span data-ttu-id="01a38-129">A tale scopo, impostare il **Nested** proprietà delle **DataRelation** a **true** quando si aggiunge il **DataRelation** al <xref:System.Data.DataSet>.</span><span class="sxs-lookup"><span data-stu-id="01a38-129">To accomplish this, set the **Nested** property of the **DataRelation** to **true** when you add the **DataRelation** to the <xref:System.Data.DataSet>.</span></span> <span data-ttu-id="01a38-130">Per altre informazioni, vedere [annidamento di oggetti DataRelation](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/nesting-datarelations.md).</span><span class="sxs-lookup"><span data-stu-id="01a38-130">For more information, see [Nesting DataRelations](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/nesting-datarelations.md).</span></span>  
  
 <span data-ttu-id="01a38-131">Di seguito sono riportati due esempi di scrittura della rappresentazione XML di un <xref:System.Data.DataSet> in un file.</span><span class="sxs-lookup"><span data-stu-id="01a38-131">Following are two examples of how to write the XML representation of a <xref:System.Data.DataSet> to a file.</span></span> <span data-ttu-id="01a38-132">Nel primo esempio passa il nome del file per il codice XML risultante come una stringa a **WriteXml**.</span><span class="sxs-lookup"><span data-stu-id="01a38-132">The first example passes the file name for the resulting XML as a string to **WriteXml**.</span></span> <span data-ttu-id="01a38-133">Nel secondo esempio passa un' **StreamWriter** oggetto.</span><span class="sxs-lookup"><span data-stu-id="01a38-133">The second example passes a **System.IO.StreamWriter** object.</span></span>  
  
```vb  
custDS.WriteXml("Customers.xml", XmlWriteMode.WriteSchema)  
```  
  
```csharp  
custDS.WriteXml("Customers.xml", XmlWriteMode.WriteSchema);  
```  
  
```vb  
Dim xmlSW As System.IO.StreamWriter = New System.IO.StreamWriter("Customers.xml")  
custDS.WriteXml(xmlSW, XmlWriteMode.WriteSchema)  
xmlSW.Close()  
```  
  
```csharp  
System.IO.StreamWriter xmlSW = new System.IO.StreamWriter("Customers.xml");  
custDS.WriteXml(xmlSW, XmlWriteMode.WriteSchema);  
xmlSW.Close();  
```  
  
## <a name="mapping-columns-to-xml-elements-attributes-and-text"></a><span data-ttu-id="01a38-134">Mapping di colonne a elementi, attributi e testo XML</span><span class="sxs-lookup"><span data-stu-id="01a38-134">Mapping Columns to XML Elements, Attributes, and Text</span></span>  
 <span data-ttu-id="01a38-135">È possibile specificare come una colonna di una tabella è rappresentata in formato XML utilizzando il **ColumnMapping** proprietà delle **DataColumn** oggetto.</span><span class="sxs-lookup"><span data-stu-id="01a38-135">You can specify how a column of a table is represented in XML using the **ColumnMapping** property of the **DataColumn** object.</span></span> <span data-ttu-id="01a38-136">La tabella seguente illustra i diversi **MappingType** i valori per il **ColumnMapping** proprietà di una colonna di tabella e il codice XML risultante.</span><span class="sxs-lookup"><span data-stu-id="01a38-136">The following table shows the different **MappingType** values for the **ColumnMapping** property of a table column, and the resulting XML.</span></span>  
  
|<span data-ttu-id="01a38-137">Valore MappingType</span><span class="sxs-lookup"><span data-stu-id="01a38-137">MappingType value</span></span>|<span data-ttu-id="01a38-138">Descrizione</span><span class="sxs-lookup"><span data-stu-id="01a38-138">Description</span></span>|  
|-----------------------|-----------------|  
|<span data-ttu-id="01a38-139">**Elemento**</span><span class="sxs-lookup"><span data-stu-id="01a38-139">**Element**</span></span>|<span data-ttu-id="01a38-140">Questa è l'impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="01a38-140">This is the default.</span></span> <span data-ttu-id="01a38-141">La colonna viene scritta sotto forma di elemento XML. ColumnName rappresenta il nome dell'elemento e i contenuti della colonna vengono scritti come testo dell'elemento.</span><span class="sxs-lookup"><span data-stu-id="01a38-141">The column is written as an XML element where the ColumnName is the name of the element and the contents of the column are written as the text of the element.</span></span> <span data-ttu-id="01a38-142">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="01a38-142">For example:</span></span><br /><br /> `<ColumnName>Column Contents</ColumnName>`|  
|<span data-ttu-id="01a38-143">**Attributo**</span><span class="sxs-lookup"><span data-stu-id="01a38-143">**Attribute**</span></span>|<span data-ttu-id="01a38-144">La colonna viene scritta sotto forma di attributo XML dell'elemento XML per la riga corrente. ColumnName rappresenta il nome dell'attributo e i contenuti della colonna vengono scritti sotto forma di valore dell'attributo.</span><span class="sxs-lookup"><span data-stu-id="01a38-144">The column is written as an XML attribute of the XML element for the current row where the ColumnName is the name of the attribute and the contents of the column are written as the value of the attribute.</span></span> <span data-ttu-id="01a38-145">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="01a38-145">For example:</span></span><br /><br /> `<RowElement ColumnName="Column Contents" />`|  
|<span data-ttu-id="01a38-146">**SimpleContent**</span><span class="sxs-lookup"><span data-stu-id="01a38-146">**SimpleContent**</span></span>|<span data-ttu-id="01a38-147">I contenuti della colonna vengono scritti sotto forma di testo nell'elemento XML per la riga corrente.</span><span class="sxs-lookup"><span data-stu-id="01a38-147">The contents of the column are written as text in the XML element for the current row.</span></span> <span data-ttu-id="01a38-148">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="01a38-148">For example:</span></span><br /><br /> `<RowElement>Column Contents</RowElement>`<br /><br /> <span data-ttu-id="01a38-149">Si noti che **SimpleContent** non può essere impostata per una colonna di una tabella contenente **elemento** colonne o relazioni annidate.</span><span class="sxs-lookup"><span data-stu-id="01a38-149">Note that **SimpleContent** cannot be set for a column of a table that has **Element** columns or nested relations.</span></span>|  
|<span data-ttu-id="01a38-150">**Hidden**</span><span class="sxs-lookup"><span data-stu-id="01a38-150">**Hidden**</span></span>|<span data-ttu-id="01a38-151">La colonna non viene scritta nell'output XML.</span><span class="sxs-lookup"><span data-stu-id="01a38-151">The column is not written in the XML output.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="01a38-152">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="01a38-152">See also</span></span>

- [<span data-ttu-id="01a38-153">Uso di XML in un set di dati</span><span class="sxs-lookup"><span data-stu-id="01a38-153">Using XML in a DataSet</span></span>](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/using-xml-in-a-dataset.md)
- [<span data-ttu-id="01a38-154">DiffGram</span><span class="sxs-lookup"><span data-stu-id="01a38-154">DiffGrams</span></span>](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/diffgrams.md)
- [<span data-ttu-id="01a38-155">Annidamento di oggetti DataRelation</span><span class="sxs-lookup"><span data-stu-id="01a38-155">Nesting DataRelations</span></span>](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/nesting-datarelations.md)
- [<span data-ttu-id="01a38-156">Scrittura di informazioni dello schema DataSet come XSD</span><span class="sxs-lookup"><span data-stu-id="01a38-156">Writing DataSet Schema Information as XSD</span></span>](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/writing-dataset-schema-information-as-xsd.md)
- [<span data-ttu-id="01a38-157">Oggetti DataSet, DataTable e DataView</span><span class="sxs-lookup"><span data-stu-id="01a38-157">DataSets, DataTables, and DataViews</span></span>](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/index.md)
- [<span data-ttu-id="01a38-158">Provider gestiti ADO.NET e Centro per sviluppatori di set di dati</span><span class="sxs-lookup"><span data-stu-id="01a38-158">ADO.NET Managed Providers and DataSet Developer Center</span></span>](https://go.microsoft.com/fwlink/?LinkId=217917)
