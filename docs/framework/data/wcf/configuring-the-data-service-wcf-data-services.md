---
title: Configurazione del servizio dati (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, configuring
ms.assetid: 59efd4c8-cc7a-4800-a0a4-d3f8abe6c55c
ms.openlocfilehash: 5b7e078b2eb76191ba572a7d141b29f71d7d8a96
ms.sourcegitcommit: d2ccb199ae6bc5787b4762e9ea6d3f6fe88677af
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/12/2019
ms.locfileid: "56092553"
---
# <a name="configuring-the-data-service-wcf-data-services"></a>Configurazione del servizio dati (WCF Data Services)
Con [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], è possibile creare servizi dati che espongono [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed. I dati di questi feed possono provenire da una varietà di origini dati. [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] Usa i provider di dati per esporre questi dati come un [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed. Tra tali provider sono inclusi un provider di [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)], un provider di reflection e un set di interfacce del provider di servizio dati personalizzate. L'implementazione del provider definisce il modello di dati per il servizio. Per altre informazioni, vedere [provider di servizi dati](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md).  
  
 In [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] un servizio dati è una classe che eredita dalla classe <xref:System.Data.Services.DataService%601> in cui il tipo di servizio dati è il contenitore di entità del modello di dati. Questo contenitore di entità dispone di una o più proprietà che restituiscono un oggetto <xref:System.Linq.IQueryable%601> usato per accedere ai set di entità nel modello di dati.  
  
 I comportamenti del servizio dati vengono definiti dai membri della classe <xref:System.Data.Services.DataServiceConfiguration>, nonché dai membri della classe <xref:System.Data.Services.DataServiceBehavior> accessibile dalla proprietà <xref:System.Data.Services.DataServiceConfiguration.DataServiceBehavior%2A> della classe <xref:System.Data.Services.DataServiceConfiguration>. La classe <xref:System.Data.Services.DataServiceConfiguration> viene fornita al metodo `InitializeService` implementato dal servizio dati, come nella seguente implementazione di un servizio dati Northwind:  
  
[!code-csharp[Astoria Northwind Service#DataServiceConfigComplete](../../../../samples/snippets/csharp/VS_Snippets_Misc/Astoria Northwind Service/cs/northwind.svc.cs#dataserviceconfigcomplete)]  
[!code-vb[Astoria Northwind Service#DataServiceConfigComplete](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/Astoria Northwind Service/vb/northwind.svc.vb#dataserviceconfigcomplete)]  
  
## <a name="data-service-configuration-settings"></a>Impostazioni di configurazione del servizio dati  
 La classe <xref:System.Data.Services.DataServiceConfiguration> consente di specificare i comportamenti del servizio dati seguenti:  
  
|Membro|Comportamento|  
|------------|--------------|  
|<xref:System.Data.Services.DataServiceBehavior.AcceptCountRequests%2A>|Consente di disabilitare le richieste di conteggio inviate al servizio dati tramite il segmento di percorso `$count` e l'opzione query `$inlinecount`. Per altre informazioni, vedere [OData: Convenzioni URI](https://go.microsoft.com/fwlink/?LinkId=185564).|  
|<xref:System.Data.Services.DataServiceBehavior.AcceptProjectionRequests%2A>|Consente di disabilitare il supporto per la proiezione dei dati nelle richieste inviate al servizio dati tramite l'opzione di query `$select`. Per altre informazioni, vedere [OData: Convenzioni URI](https://go.microsoft.com/fwlink/?LinkId=185564).|  
|<xref:System.Data.Services.DataServiceConfiguration.EnableTypeAccess%2A>|Consente l'esposizione di un tipo di dati nei metadati per un provider di metadati dinamici definito tramite l'interfaccia <xref:System.Data.Services.Providers.IDataServiceMetadataProvider>.|  
|<xref:System.Data.Services.DataServiceConfiguration.EnableTypeConversion%2A>|Consente di specificare se il runtime del servizio dati deve convertire il tipo incluso nel payload nel tipo di proprietà effettivo specificato nella richiesta.|  
|<xref:System.Data.Services.DataServiceBehavior.InvokeInterceptorsOnLinkDelete%2A>|Consente di specificare se gli intercettori di modifica registrati vengono richiamati sulle entità correlate quando viene eliminato un collegamento alla relazione tra due entità.|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxBatchCount%2A>|Consente di limitare il numero massimo di set di modifiche e di operazioni di query consentite in un singolo batch. Per altre informazioni, vedere [OData: Batch](https://go.microsoft.com/fwlink/?LinkId=185602) e [operazioni batch](../../../../docs/framework/data/wcf/batching-operations-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxChangesetCount%2A>|Consente di limitare il numero massimo di modifiche che è possibile includere in un singolo insieme di modifiche. Per altre informazioni, vedere [Procedura: Abilitare il Paging dei risultati del servizio dati](../../../../docs/framework/data/wcf/how-to-enable-paging-of-data-service-results-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxExpandCount%2A>|Consente di limitare le dimensioni di una risposta limitando il numero di entità correlate che è possibile includere in una singola richiesta tramite l'operatore di query `$expand`. Per altre informazioni, vedere [OData: Convenzioni URI](https://go.microsoft.com/fwlink/?LinkId=185564) e [caricamento di contenuto posticipato](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxExpandDepth%2A>|Consente di limitare le dimensioni di una risposta limitando la profondità del grafico delle entità correlate che è possibile includere in una singola richiesta tramite l'operatore di query `$expand`. Per altre informazioni, vedere [OData: Convenzioni URI](https://go.microsoft.com/fwlink/?LinkId=185564) e [caricamento di contenuto posticipato](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxObjectCountOnInsert%2A>|Consentire di limitare il numero di entità da inserire che possono essere incluse in una singola richiesta POST.|  
|<xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A>|Definisce la versione del protocollo Atom usata dal servizio dati. Quando il valore di <xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A> è impostato su un valore minore del valore massimo di <xref:System.Data.Services.Common.DataServiceProtocolVersion>, le funzionalità più recenti di [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] non sono disponibili per i client che accedono al servizio dati. Per altre informazioni, vedere [controllo delle versioni del servizio dati](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxResultsPerCollection%2A>|Consentire di limitare le dimensioni di una risposta limitando il numero di entità in ogni set di entità restituito come feed di dati.|  
|<xref:System.Data.Services.DataServiceConfiguration.RegisterKnownType%2A>|Consente di aggiungere un tipo di dati all'elenco di tipi riconosciuti dal servizio dati.|  
|<xref:System.Data.Services.DataServiceConfiguration.SetEntitySetAccessRule%2A>|Consente di impostare i diritti di accesso per le risorse di set di entità disponibili nel servizio dati. Per il nome del parametro è possibile specificare un asterisco (`*`) per impostare l'accesso per tutti i set di entità rimanenti sullo stesso livello. È consigliabile impostare l'accesso ai set di entità per fornire l'accesso con privilegi minimi alle risorse del servizio dati richieste dalle applicazioni client. Per altre informazioni, vedere [Securing WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md). Per esempi dei diritti di accesso minimo richiesto per una data azione URI e HTTP, vedere la tabella nel [minimi i requisiti di accesso alle risorse](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md#accessRequirements) sezione.|  
|<xref:System.Data.Services.DataServiceConfiguration.SetEntitySetPageSize%2A>|Consente di impostare le dimensioni massime della pagina per una risorsa del set di entità. Per altre informazioni, vedere [Procedura: Abilitare il Paging dei risultati del servizio dati](../../../../docs/framework/data/wcf/how-to-enable-paging-of-data-service-results-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.SetServiceOperationAccessRule%2A>|Consente di impostare i diritti di accesso per le operazioni del servizio definite nel servizio dati. Per altre informazioni, vedere [operazioni del servizio](../../../../docs/framework/data/wcf/service-operations-wcf-data-services.md). Per il nome del parametro è possibile specificare un asterisco (`*`) per impostare l'accesso per tutte le operazioni del servizio sullo stesso livello. È consigliabile impostare l'accesso alle operazioni del servizio per fornire l'accesso con privilegi minimi alle risorse del servizio dati richieste dalle applicazioni client. Per altre informazioni, vedere [Securing WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.UseVerboseErrors%2A>|Questa proprietà di configurazione consente di risolvere più facilmente i problemi relativi a un servizio dati restituendo altre informazioni nel messaggio dell'errore. Questa opzione non è destinata all'utilizzo in un ambiente di produzione. Per altre informazioni, vedere [via di sviluppo e distribuzione di WCF Data Services](../../../../docs/framework/data/wcf/developing-and-deploying-wcf-data-services.md).|  
  
<a name="accessRequirements"></a>   
## <a name="minimum-resource-access-requirements"></a>Requisiti minimi di accesso alle risorse  
 Nella tabella seguente vengono mostrati in dettaglio i diritti minimi dei set di entità che devono essere concessi per eseguire un'operazione specifica. Esempi di percorso sono basati sul servizio dati Northwind creato al completamento di [Guida introduttiva](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md). Poiché le enumerazioni <xref:System.Data.Services.EntitySetRights> e <xref:System.Data.Services.ServiceOperationRights> vengono definite tramite <xref:System.FlagsAttribute>, è possibile usare un operatore logico OR per specificare più autorizzazioni per una sola operazione o un solo set di entità. Per altre informazioni, vedere [Procedura: Abilitare l'accesso al servizio dati](../../../../docs/framework/data/wcf/how-to-enable-access-to-the-data-service-wcf-data-services.md).  
  
|Percorso/Azione|`GET`|`DELETE`|`MERGE`|`POST`|`PUT`|  
|------------------|-----------|--------------|-------------|------------|-----------|  
|`/Customers`|<xref:System.Data.Services.EntitySetRights.ReadMultiple>|Non supportato|Non supportato|<xref:System.Data.Services.EntitySetRights.WriteAppend>|Non supportato|  
|`/Customers('ALFKI')`|<xref:System.Data.Services.EntitySetRights.ReadSingle>|<xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteDelete>|<xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteMerge>|N/D|<xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers('ALFKI')/Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|Non supportato|Non supportato|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteMerge> o <xref:System.Data.Services.EntitySetRights.WriteReplace><br /><br /> -e-<br /><br /> `Orders` `:` E <xref:System.Data.Services.EntitySetRights.WriteAppend>|Non supportato|  
|`/Customers('ALFKI')/Orders(10643)`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteDelete>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteMerge>|Non supportato|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Orders(10643)/Customer`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteDelete><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteMerge>;<br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.WriteAppend><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.WriteAppend> e <xref:System.Data.Services.EntitySetRights.ReadSingle>|Non supportato|  
|`/Customers('ALFKI')/$links/Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|Non supportato|Non supportato|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteMerge> o <xref:System.Data.Services.EntitySetRights.WriteReplace><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|Non supportato|  
|`/Customers('ALFKI')/$links/Orders(10643)`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteMerge> o <xref:System.Data.Services.EntitySetRights.WriteReplace><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|Non supportato|Non supportato|Non supportato|  
|`/Orders(10643)/$links/Customer`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteMerge> o <xref:System.Data.Services.EntitySetRights.WriteReplace>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteMerge>|Non supportato|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle>;<br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers/$count`|<xref:System.Data.Services.EntitySetRights.ReadMultiple>|Non supportato|Non supportato|Non supportato|Non supportato|  
|`/Customers('ALFKI')/ContactName`|<xref:System.Data.Services.EntitySetRights.ReadSingle>|Non supportato|<xref:System.Data.Services.EntitySetRights.WriteMerge>|Non supportato|<xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers('ALFKI')/Address/StreetAddress/$value` <sup>1</sup>|<xref:System.Data.Services.EntitySetRights.ReadSingle>|<xref:System.Data.Services.EntitySetRights.WriteDelete>|Non supportato|Non supportato|Non supportato|  
|`/Customers('ALFKI')/ContactName/$value`|<xref:System.Data.Services.EntitySetRights.ReadSingle>|<xref:System.Data.Services.EntitySetRights.ReadSingle> e <xref:System.Data.Services.EntitySetRights.WriteDelete>|<xref:System.Data.Services.EntitySetRights.WriteMerge>|Non supportato|<xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers('ALFKI')/$value` <sup>2</sup>|<xref:System.Data.Services.EntitySetRights.ReadSingle>|Non supportato|Non supportato|Non supportato|<xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers?$select=Orders/*&$expand=Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|Non supportato|Non supportato|`Customers`: <xref:System.Data.Services.EntitySetRights.WriteAppend>|Non supportato|  
|`/Customers('ALFKI')?$select=Orders/*&$expand=Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> -e-<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|Non supportato|Non supportato|Non supportato|Non supportato|  
  
 <sup>1</sup> in questo esempio `Address` rappresenta una proprietà di tipo complesso delle `Customers` entità che dispone di una proprietà denominata `StreetAddress`. Il modello usato dai servizi dati Northwind non definisce in modo esplicito questo tipo complesso. Quando il modello di dati viene definito usando il provider di [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)], è possibile usare gli strumenti di [!INCLUDE[adonet_edm](../../../../includes/adonet-edm-md.md)] per definire tale tipo complesso. Per altre informazioni, vedere [Procedura: Creare e modificare tipi complessi](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd456820(v=vs.100)).  
  
 <sup>2</sup> questo URI è supportato quando viene definita una proprietà che restituisce un oggetto binario di grandi dimensioni (BLOB) come risorsa multimediale che appartiene a un'entità che è una voce di collegamento multimediale, che in questo caso, è `Customers`. Per altre informazioni, vedere [Provider di flusso](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).  
  
<a name="versioning"></a>   
## <a name="versioning-requirements"></a>Requisiti di versione  
 Per i seguenti comportamenti di configurazione del servizio dati è richiesta la versione 2 del protocollo [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] o versioni successive:  
  
-   Supporto per le richieste del conteggio.  
  
-   Supporto per l'opzione di query $select per proiezione.  
  
 Per altre informazioni, vedere [controllo delle versioni del servizio dati](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).  
  
## <a name="see-also"></a>Vedere anche
- [Definizione di WCF Data Services](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)
- [Hosting del servizio dati](../../../../docs/framework/data/wcf/hosting-the-data-service-wcf-data-services.md)
