---
title: Cenni preliminari sulle animazioni personalizzate
ms.date: 03/30/2017
helpviewer_keywords:
- custom classes [WPF], animation
- key frames [WPF], custom
- custom key frames [WPF]
- animation [WPF], custom classes
- custom animation classes [WPF]
ms.assetid: 9be69d50-3384-4938-886f-08ce00e4a7a6
ms.openlocfilehash: 78c32c8aa1cf63ad6b9c9c51d856b02ccec68384
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 04/08/2019
ms.locfileid: "59190730"
---
# <a name="custom-animations-overview"></a><span data-ttu-id="0b0b8-102">Cenni preliminari sulle animazioni personalizzate</span><span class="sxs-lookup"><span data-stu-id="0b0b8-102">Custom Animations Overview</span></span>
<span data-ttu-id="0b0b8-103">Questo argomento descrive come e quando estendere il sistema di animazione [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] creando fotogrammi chiave e classi di animazione personalizzati o usando il callback per frame come alternativa al sistema.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-103">This topic describes how and when to extend the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system by creating custom key frames, animation classes, or by using per-frame callback to bypass it.</span></span>  
  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="0b0b8-104">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="0b0b8-104">Prerequisites</span></span>  
 <span data-ttu-id="0b0b8-105">Per comprendere l'argomento, è necessario conoscere i diversi tipi di animazione offerti da [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0b0b8-105">To understand this topic, you should be familiar with the different types of animations provided by the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="0b0b8-106">Per altre informazioni, vedere Cenni preliminari sulle animazioni From/To/By, [Cenni preliminari sulle animazioni con fotogrammi chiave](key-frame-animations-overview.md) e [Panoramica sulle animazioni tracciato](path-animations-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b0b8-106">For more information, see the From/To/By Animations Overview, the [Key-Frame Animations Overview](key-frame-animations-overview.md), and the [Path Animations Overview](path-animations-overview.md).</span></span>  
  
 <span data-ttu-id="0b0b8-107">Poiché le classi di animazione ereditano dal <xref:System.Windows.Freezable> (classe), è necessario conoscere <xref:System.Windows.Freezable> gli oggetti e su come ereditare da <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-107">Because the animation classes inherit from the <xref:System.Windows.Freezable> class, you should be familiar with <xref:System.Windows.Freezable> objects and how to inherit from <xref:System.Windows.Freezable>.</span></span> <span data-ttu-id="0b0b8-108">Per altre informazioni, vedere [Cenni preliminari sugli oggetti Freezable](../advanced/freezable-objects-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b0b8-108">For more information, see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md).</span></span>  
  
<a name="extendingtheanimationsystem"></a>   
## <a name="extending-the-animation-system"></a><span data-ttu-id="0b0b8-109">Estensione del sistema di animazione</span><span class="sxs-lookup"><span data-stu-id="0b0b8-109">Extending the Animation System</span></span>  
 <span data-ttu-id="0b0b8-110">Esistono diversi modi per estendere il sistema di animazione [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], a seconda del livello di funzionalità incorporate che si desidera usare.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-110">There are a number of ways to extend the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system, depending on the level of built-in functionality you want to use.</span></span>  <span data-ttu-id="0b0b8-111">Esistono tre punti di estendibilità principali nel motore di animazione [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="0b0b8-111">There are three primary extensibility points in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation engine:</span></span>  
  
-   <span data-ttu-id="0b0b8-112">Creare un oggetto fotogramma chiave personalizzato ereditando da una delle  *\<tipo >* classi fotogramma chiave, ad esempio <xref:System.Windows.Media.Animation.DoubleKeyFrame>.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-112">Create a custom key frame object by inheriting from one of the *\<Type>* KeyFrame classes, such as <xref:System.Windows.Media.Animation.DoubleKeyFrame>.</span></span> <span data-ttu-id="0b0b8-113">Questo approccio usa la maggior parte delle funzionalità incorporate del motore di animazione [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0b0b8-113">This approach uses most of the built-in functionality of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation engine.</span></span>  
  
-   <span data-ttu-id="0b0b8-114">Creare una classe di animazione personalizzato ereditando da <xref:System.Windows.Media.Animation.AnimationTimeline> o uno dei  *\<tipo >* classi AnimationBase.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-114">Create your own animation class by inheriting from <xref:System.Windows.Media.Animation.AnimationTimeline> or one of the *\<Type>* AnimationBase classes.</span></span>  
  
-   <span data-ttu-id="0b0b8-115">Usare il callback per frame per generare animazioni per frame.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-115">Use per-frame callback to generate animations on a per-frame basis.</span></span> <span data-ttu-id="0b0b8-116">Questo approccio ignora completamente il sistema di animazione e di intervalli.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-116">This approach completely bypasses the animation and timing system.</span></span>  
  
 <span data-ttu-id="0b0b8-117">La tabella seguente descrive alcuni scenari per l'estensione del sistema di animazione.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-117">The following table describes some the scenarios for extending the animation system.</span></span>  
  
|<span data-ttu-id="0b0b8-118">Quando si vuole...</span><span class="sxs-lookup"><span data-stu-id="0b0b8-118">When you want to...</span></span>|<span data-ttu-id="0b0b8-119">Usare questo approccio</span><span class="sxs-lookup"><span data-stu-id="0b0b8-119">Use this approach</span></span>|  
|-------------------------|-----------------------|  
|<span data-ttu-id="0b0b8-120">Personalizzare l'interpolazione tra valori di un tipo che possiede un *\<Tipo>* AnimationUsingKeyFrames corrispondente.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-120">Customize the interpolation between values of a type that has a corresponding *\<Type>* AnimationUsingKeyFrames</span></span>|<span data-ttu-id="0b0b8-121">Creare un fotogramma chiave personalizzato.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-121">Create a custom key frame.</span></span> <span data-ttu-id="0b0b8-122">Per altre informazioni, vedere la sezione [Creare un fotogramma chiave personalizzato](#createacustomkeyframe).</span><span class="sxs-lookup"><span data-stu-id="0b0b8-122">For more information, see the [Create a Custom Key Frame](#createacustomkeyframe) section.</span></span>|  
|<span data-ttu-id="0b0b8-123">Non personalizzare solo l'interpolazione tra valori di un tipo che possiede un *\<Tipo>* Animation corrispondente.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-123">Customize more than just the interpolation between values of a type that has a corresponding *\<Type>* Animation.</span></span>|<span data-ttu-id="0b0b8-124">Creare una classe di animazione personalizzata che eredita dalla classe *\<Tipo>* AnimationBase che corrisponde al tipo che si desidera animare.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-124">Create a custom animation class that inherits from the *\<Type>* AnimationBase class that corresponds to the type you want to animate.</span></span> <span data-ttu-id="0b0b8-125">Per altre informazioni, vedere la sezione [Create a Custom Animation Class](#createacustomanimationtype) (Creare una classe di animazione personalizzata).</span><span class="sxs-lookup"><span data-stu-id="0b0b8-125">For more information, see the [Create a Custom Animation Class](#createacustomanimationtype) section.</span></span>|  
|<span data-ttu-id="0b0b8-126">Animare un tipo che non possiede alcuna animazione [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] corrispondente.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-126">Animate a type that has no corresponding [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation</span></span>|<span data-ttu-id="0b0b8-127">Usa un' <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> o creare una classe che eredita da <xref:System.Windows.Media.Animation.AnimationTimeline>.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-127">Use an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> or create a class that inherits from <xref:System.Windows.Media.Animation.AnimationTimeline>.</span></span> <span data-ttu-id="0b0b8-128">Per altre informazioni, vedere la sezione [Create a Custom Animation Class](#createacustomanimationtype) (Creare una classe di animazione personalizzata).</span><span class="sxs-lookup"><span data-stu-id="0b0b8-128">For more information, see the [Create a Custom Animation Class](#createacustomanimationtype) section.</span></span>|  
|<span data-ttu-id="0b0b8-129">Animare più oggetti con valori che vengono calcolati a ogni frame e si basano l'ultimo set di interazioni tra oggetti.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-129">Animate multiple objects with values that are computed each frame and are based on the last set of object interactions</span></span>|<span data-ttu-id="0b0b8-130">Usare il callback per frame.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-130">Use per-frame callback.</span></span> <span data-ttu-id="0b0b8-131">Per altre informazioni, vedere la sezione [Usare il callback per frame](#useperframecallback).</span><span class="sxs-lookup"><span data-stu-id="0b0b8-131">For more information, see the [Create a Use Per-Frame Callback](#useperframecallback) section.</span></span>|  
  
<a name="createacustomkeyframe"></a>   
## <a name="create-a-custom-key-frame"></a><span data-ttu-id="0b0b8-132">Creare un fotogramma chiave personalizzato</span><span class="sxs-lookup"><span data-stu-id="0b0b8-132">Create a Custom Key Frame</span></span>  
 <span data-ttu-id="0b0b8-133">La creazione di una classe di fotogramma chiave personalizzata rappresenta il modo più semplice per estendere il sistema di animazione.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-133">Creating a custom key frame class is the simplest way to extend the animation system.</span></span> <span data-ttu-id="0b0b8-134">È consigliabile usare questo approccio quando si desidera usare un metodo di interpolazione diverso per un'animazione con fotogrammi chiave.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-134">Use this approach when you want to a different interpolation method for a key-frame animation.</span></span>  <span data-ttu-id="0b0b8-135">Come descritto in [Cenni preliminari sulle animazioni con fotogrammi chiave](key-frame-animations-overview.md), un'animazione con fotogrammi chiave usa oggetti fotogramma chiave per generare i valori di output.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-135">As described in the [Key-Frame Animations Overview](key-frame-animations-overview.md), a key-frame animation uses key frame objects to generate its output values.</span></span> <span data-ttu-id="0b0b8-136">Ogni oggetto fotogramma chiave esegue tre funzioni:</span><span class="sxs-lookup"><span data-stu-id="0b0b8-136">Each key frame object performs three functions:</span></span>  
  
-   <span data-ttu-id="0b0b8-137">Specifica un valore di destinazione utilizzando il <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> proprietà.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-137">Specifies a target value using its <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> property.</span></span>  
  
-   <span data-ttu-id="0b0b8-138">Specifica l'ora in cui tale valore deve essere raggiunto utilizzando relativo <xref:System.Windows.Media.Animation.IKeyFrame.KeyTime%2A> proprietà.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-138">Specifies the time at which that value should be reached using its <xref:System.Windows.Media.Animation.IKeyFrame.KeyTime%2A> property.</span></span>  
  
-   <span data-ttu-id="0b0b8-139">Crea un'interpolazione tra il valore del fotogramma chiave precedente e il proprio valore implementando il metodo InterpolateValueCore.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-139">Interpolates between the value of the previous key frame and its own value by implementing the InterpolateValueCore method.</span></span>  
  
 **<span data-ttu-id="0b0b8-140">Per istruzioni sull'implementazione</span><span class="sxs-lookup"><span data-stu-id="0b0b8-140">Implementation Instructions</span></span>**  
  
 <span data-ttu-id="0b0b8-141">Eseguire la derivazione dalla classe astratta *\<Tipo>* KeyFrame e implementare il metodo InterpolateValueCore.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-141">Derive from the *\<Type>* KeyFrame abstract class and implement the InterpolateValueCore method.</span></span> <span data-ttu-id="0b0b8-142">Il metodo InterpolateValueCore restituisce il valore corrente del fotogramma chiave.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-142">The InterpolateValueCore method returns the current value of the key frame.</span></span> <span data-ttu-id="0b0b8-143">Accetta due parametri: il valore del fotogramma chiave precedente e un valore di avanzamento compreso tra 0 e 1.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-143">It takes two parameters: the value of the previous key frame and a progress value that ranges from 0 to 1.</span></span> <span data-ttu-id="0b0b8-144">Un avanzamento pari a 0 indica che il fotogramma chiave è appena stata avviata e un valore pari a 1 indica che il fotogramma chiave è appena stato completato e deve restituire il valore specificato dal relativo <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> proprietà.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-144">A progress of 0 indicates the key frame has just started, and a value of 1 indicates that the key frame has just completed and should return the value specified by its <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> property.</span></span>  
  
 <span data-ttu-id="0b0b8-145">Poiché il  *\<tipo >* KeyFrame eredita dal <xref:System.Windows.Freezable> (classe), è inoltre necessario sostituire <xref:System.Windows.Freezable.CreateInstanceCore%2A> core per restituire una nuova istanza della classe.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-145">Because the *\<Type>* KeyFrame classes inherit from the <xref:System.Windows.Freezable> class, you must also override <xref:System.Windows.Freezable.CreateInstanceCore%2A> core to return a new instance of your class.</span></span> <span data-ttu-id="0b0b8-146">Se la classe non usa le proprietà di dipendenza per archiviare i dati o richiede un'altra inizializzazione dopo la creazione, potrebbe essere necessario eseguire l'override di altri metodi. Per altre informazioni, vedere [Cenni preliminari sugli oggetti Freezable](../advanced/freezable-objects-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b0b8-146">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="0b0b8-147">Dopo aver creato l'animazione *\<Tipo>* KeyFrame personalizzata, è possibile usarla con *\<Tipo>* AnimationUsingKeyFrames per tale tipo.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-147">After you've created your custom *\<Type>* KeyFrame animation, you can use it with the *\<Type>* AnimationUsingKeyFrames for that type.</span></span>  
  
<a name="createacustomanimationtype"></a>   
## <a name="create-a-custom-animation-class"></a><span data-ttu-id="0b0b8-148">Creare una classe di animazione personalizzata</span><span class="sxs-lookup"><span data-stu-id="0b0b8-148">Create a Custom Animation Class</span></span>  
 <span data-ttu-id="0b0b8-149">La creazione di un tipo di animazione personalizzato consente un maggiore controllo sul modo in cui un oggetto viene animato.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-149">Creating your own animation type gives you more control over how an object in animated.</span></span> <span data-ttu-id="0b0b8-150">Esistono due modi consigliati per creare un proprio tipo di animazione: è possibile derivare il <xref:System.Windows.Media.Animation.AnimationTimeline> classe o il  *\<tipo >* classe AnimationBase.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-150">There are two recommended ways to create your own animation type: you can derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class or the *\<Type>* AnimationBase class.</span></span> <span data-ttu-id="0b0b8-151">La derivazione della classe *\<Tipo>* Animation o *\<Tipo>* AnimationUsingKeyFrames non è consigliata.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-151">Deriving from the *\<Type>* Animation or *\<Type>* AnimationUsingKeyFrames classes is not recommended.</span></span>  
  
### <a name="derive-from-typeanimationbase"></a><span data-ttu-id="0b0b8-152">Derivazione dalla classe \<Tipo>AnimationBase</span><span class="sxs-lookup"><span data-stu-id="0b0b8-152">Derive from \<Type>AnimationBase</span></span>  
 <span data-ttu-id="0b0b8-153">La derivazione da una classe *\<Tipo>* AnimationBase è il modo più semplice per creare un nuovo tipo di animazione.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-153">Deriving from a *\<Type>* AnimationBase class is the simplest way to create a new animation type.</span></span> <span data-ttu-id="0b0b8-154">Usare questo approccio quando si desidera creare una nuova animazione per il tipo che dispone già di una classe *\<Tipo>* AnimationBase.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-154">Use this approach when you want to create a new animation for type that already has a corresponding *\<Type>* AnimationBase class.</span></span>  
  
 **<span data-ttu-id="0b0b8-155">Per istruzioni sull'implementazione</span><span class="sxs-lookup"><span data-stu-id="0b0b8-155">Implementation Instructions</span></span>**  
  
 <span data-ttu-id="0b0b8-156">Eseguire la derivazione di una classe *\<Tipo>* Animation e implementare il metodo GetCurrentValueCore.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-156">Derive from a *\<Type>* Animation class and implement the GetCurrentValueCore method.</span></span> <span data-ttu-id="0b0b8-157">Il metodo GetCurrentValueCore restituisce il valore corrente dell'animazione.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-157">The GetCurrentValueCore method returns the current value of the animation.</span></span> <span data-ttu-id="0b0b8-158">Accetta tre parametri: un valore iniziale suggerito, un valore finale suggerito e un <xref:System.Windows.Media.Animation.AnimationClock>, utilizzabile per determinare lo stato di avanzamento dell'animazione.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-158">It takes three parameters: a suggested starting value, a suggested ending value, and an <xref:System.Windows.Media.Animation.AnimationClock>, which you use to determine the progress of the animation.</span></span>  
  
 <span data-ttu-id="0b0b8-159">Poiché il  *\<tipo >* classi AnimationBase ereditano dal <xref:System.Windows.Freezable> (classe), è inoltre necessario sostituire <xref:System.Windows.Freezable.CreateInstanceCore%2A> core per restituire una nuova istanza della classe.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-159">Because the *\<Type>* AnimationBase classes inherit from the <xref:System.Windows.Freezable> class, you must also override <xref:System.Windows.Freezable.CreateInstanceCore%2A> core to return a new instance of your class.</span></span> <span data-ttu-id="0b0b8-160">Se la classe non usa le proprietà di dipendenza per archiviare i dati o richiede un'altra inizializzazione dopo la creazione, potrebbe essere necessario eseguire l'override di altri metodi. Per altre informazioni, vedere [Cenni preliminari sugli oggetti Freezable](../advanced/freezable-objects-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b0b8-160">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="0b0b8-161">Per altri informazioni, vedere la documentazione relativa al metodo GetCurrentValueCore per la classe *\<Tipo>* AnimationBase per il tipo che si desidera animare.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-161">For more information, see the GetCurrentValueCore method documentation for the *\<Type>* AnimationBase class for the type that you want to animate.</span></span> <span data-ttu-id="0b0b8-162">Per un esempio, vedere [Esempio di animazione personalizzata](https://go.microsoft.com/fwlink/?LinkID=159981)</span><span class="sxs-lookup"><span data-stu-id="0b0b8-162">For an example, see the [Custom Animation Sample](https://go.microsoft.com/fwlink/?LinkID=159981)</span></span>  
  
 **<span data-ttu-id="0b0b8-163">Approcci alternativi</span><span class="sxs-lookup"><span data-stu-id="0b0b8-163">Alternative Approaches</span></span>**  
  
 <span data-ttu-id="0b0b8-164">Se si desidera semplicemente modificare il modo in cui i valori dell'animazione vengono interpolati, si prenda in considerazione la derivazione da una delle classi *\<Tipo>* KeyFrame.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-164">If you simply want to change how animation values are interpolated, considering deriving from one of the *\<Type>* KeyFrame classes.</span></span> <span data-ttu-id="0b0b8-165">Il fotogramma chiave creato può essere usato con la classe *\<Tipo>* AnimationUsingKeyFrames corrispondente fornita da [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0b0b8-165">The key frame you create can be used with the corresponding *\<Type>* AnimationUsingKeyFrames provided by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
### <a name="derive-from-animationtimeline"></a><span data-ttu-id="0b0b8-166">Derivazione dalla classe AnimationTimeline</span><span class="sxs-lookup"><span data-stu-id="0b0b8-166">Derive from AnimationTimeline</span></span>  
 <span data-ttu-id="0b0b8-167">Derivare dal <xref:System.Windows.Media.Animation.AnimationTimeline> classe quando si desidera creare un'animazione per un tipo che non dispone già di un oggetto corrispondente [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] l'animazione o si vuole creare un'animazione che non sia fortemente tipizzata.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-167">Derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class when you want to create an animation for a type that doesn't already have a matching [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation, or you want to create an animation that is not strongly typed.</span></span>  
  
 **<span data-ttu-id="0b0b8-168">Per istruzioni sull'implementazione</span><span class="sxs-lookup"><span data-stu-id="0b0b8-168">Implementation Instructions</span></span>**  
  
 <span data-ttu-id="0b0b8-169">Derivativo di <xref:System.Windows.Media.Animation.AnimationTimeline> classe ed eseguire l'override dei membri seguenti:</span><span class="sxs-lookup"><span data-stu-id="0b0b8-169">Derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class and override the following members:</span></span>  
  
-   <xref:System.Windows.Freezable.CreateInstanceCore%2A> <span data-ttu-id="0b0b8-170">: Se la nuova classe è concreta, è necessario eseguire l'override <xref:System.Windows.Freezable.CreateInstanceCore%2A> per restituire una nuova istanza della classe.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-170">– If your new class is concrete, you must override <xref:System.Windows.Freezable.CreateInstanceCore%2A> to return a new instance of your class.</span></span>  
  
-   <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> <span data-ttu-id="0b0b8-171">: Eseguire l'override di questo metodo per restituire il valore corrente dell'animazione.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-171">– Override this method to return the current value of your animation.</span></span> <span data-ttu-id="0b0b8-172">Accetta tre parametri: un valore di origine predefinito, un valore di destinazione predefinito e un <xref:System.Windows.Media.Animation.AnimationClock>.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-172">It takes three parameters: a default origin value, a default destination value, and an <xref:System.Windows.Media.Animation.AnimationClock>.</span></span> <span data-ttu-id="0b0b8-173">Usare il <xref:System.Windows.Media.Animation.AnimationClock> per ottenere l'ora corrente o avanzamento dell'animazione.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-173">Use the <xref:System.Windows.Media.Animation.AnimationClock> to obtain the current time or progress for the animation.</span></span> <span data-ttu-id="0b0b8-174">L'uso dei valori predefiniti di origine e destinazione è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-174">You can choose whether to use the default origin and destination values.</span></span>  
  
-   <xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> <span data-ttu-id="0b0b8-175">: Eseguire l'override di questa proprietà per indicare se l'animazione Usa il valore di destinazione predefinito specificato per il <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> (metodo).</span><span class="sxs-lookup"><span data-stu-id="0b0b8-175">– Override this property to indicate whether your animation uses the default destination value specified by the <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> method.</span></span>  
  
-   <xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> <span data-ttu-id="0b0b8-176">: Eseguire l'override di questa proprietà per indicare il <xref:System.Type> di output prodotto dall'animazione.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-176">– Override this property to indicate the <xref:System.Type> of output your animation produces.</span></span>  
  
 <span data-ttu-id="0b0b8-177">Se la classe non usa le proprietà di dipendenza per archiviare i dati o richiede un'altra inizializzazione dopo la creazione, potrebbe essere necessario eseguire l'override di altri metodi. Per altre informazioni, vedere [Cenni preliminari sugli oggetti Freezable](../advanced/freezable-objects-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b0b8-177">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="0b0b8-178">Il paradigma consigliato (usato dalle animazioni [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]) consiste nell'usare due livelli di ereditarietà:</span><span class="sxs-lookup"><span data-stu-id="0b0b8-178">The recommended paradigm (used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animations) is to use two inheritance levels:</span></span>  
  
1.  <span data-ttu-id="0b0b8-179">Creare una classe astratta  *\<tipo >* AnimationBase che deriva da <xref:System.Windows.Media.Animation.AnimationTimeline>.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-179">Create an abstract *\<Type>* AnimationBase class that derives from <xref:System.Windows.Media.Animation.AnimationTimeline>.</span></span> <span data-ttu-id="0b0b8-180">Questa classe deve eseguire l'override di <xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> (metodo).</span><span class="sxs-lookup"><span data-stu-id="0b0b8-180">This class should override the <xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> method.</span></span> <span data-ttu-id="0b0b8-181">Deve anche introdurre un nuovo metodo astratto, GetCurrentValueCore ed eseguire l'override <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> in modo che la convalida dei tipi dei parametri di valore di destinazione predefinito e valore di origine predefinito, quindi chiamare GetCurrentValueCore.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-181">It should also introduce a new abstract method, GetCurrentValueCore, and override <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> so that it validates the types of the default origin value and default destination value parameters, then calls GetCurrentValueCore.</span></span>  
  
2.  <span data-ttu-id="0b0b8-182">Creare un'altra classe che eredita dalla nuova  *\<tipo >* classe AnimationBase ed esegue l'override di <xref:System.Windows.Freezable.CreateInstanceCore%2A> metodo, il metodo GetCurrentValueCore introdotto, e il <xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> proprietà.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-182">Create another class that inherits from your new *\<Type>* AnimationBase class and overrides the <xref:System.Windows.Freezable.CreateInstanceCore%2A> method, the GetCurrentValueCore method that you introduced, and the <xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> property.</span></span>  
  
 **<span data-ttu-id="0b0b8-183">Approcci alternativi</span><span class="sxs-lookup"><span data-stu-id="0b0b8-183">Alternative Approaches</span></span>**  
  
 <span data-ttu-id="0b0b8-184">Se si desidera aggiungere un'animazione a un tipo che non dispone di animazione From/To/By corrispondente o animazione con fotogrammi chiave, è consigliabile usare un <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames>.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-184">If you want to animate a type that has no corresponding From/To/By animation or key-frame animation, consider using an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames>.</span></span> <span data-ttu-id="0b0b8-185">Poiché è scarsamente tipizzato, un <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> può animare qualsiasi tipo di valore.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-185">Because it is weakly typed, an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> can animate any type of value.</span></span> <span data-ttu-id="0b0b8-186">Lo svantaggio di questo approccio è che <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> supporta solo l'interpolazione discreta.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-186">The drawback to this approach is that <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> only supports discrete interpolation.</span></span>  
  
<a name="useperframecallback"></a>   
## <a name="use-per-frame-callback"></a><span data-ttu-id="0b0b8-187">Usare il callback per frame</span><span class="sxs-lookup"><span data-stu-id="0b0b8-187">Use Per-Frame Callback</span></span>  
 <span data-ttu-id="0b0b8-188">Usare questo approccio quando è necessario ignorare completamente il sistema di animazione di [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0b0b8-188">Use this approach when you need to completely bypass the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system.</span></span> <span data-ttu-id="0b0b8-189">Uno scenario di questo approccio è rappresentato dalle animazioni fisiche, dove a ciascun passaggio dell'animazione è necessario ricalcolare una nuova direzione o posizione degli oggetti animati in base all'ultima serie di interazioni dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-189">One scenario for this approach is physics animations, where at each animation step a new direction or position of animated objects needs to be recomputed based on the  last set of object interactions.</span></span>  
  
 **<span data-ttu-id="0b0b8-190">Per istruzioni sull'implementazione</span><span class="sxs-lookup"><span data-stu-id="0b0b8-190">Implementation Instructions</span></span>**  
  
 <span data-ttu-id="0b0b8-191">A differenza degli altri approcci descritti in questa panoramica, per usare un callback per frame non è necessario creare un'animazione personalizzata o una classe con fotogrammi chiave.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-191">Unlike the other approaches described in this overview, to use per-frame callback you don't need to create a custom animation or key frame class.</span></span>  
  
 <span data-ttu-id="0b0b8-192">Ma vengono registrati per il <xref:System.Windows.Media.CompositionTarget.Rendering> evento dell'oggetto che contiene gli oggetti da animare.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-192">Instead, you register for the <xref:System.Windows.Media.CompositionTarget.Rendering> event of the object that contains the objects you want to animate.</span></span> <span data-ttu-id="0b0b8-193">Questo metodo del gestore eventi viene chiamato una volta per ogni fotogramma.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-193">This event handler method gets called once per frame.</span></span> <span data-ttu-id="0b0b8-194">Ogni volta che [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] esegue il marshalling dei dati di rendering salvati in modo permanente nella struttura ad albero visuale sull'albero di composizione, viene chiamato il metodo del gestore eventi.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-194">Each time that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] marshals the persisted rendering data in the visual tree across to the composition tree, your event handler method is called.</span></span>  
  
 <span data-ttu-id="0b0b8-195">Nel gestore eventi eseguire i calcoli necessari per l'effetto di animazione e impostare le proprietà degli oggetti da animare con tali valori.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-195">In your event handler, perform your whatever calculations necessary for your animation effect and set the properties of the objects you want to animate with these values.</span></span>  
  
 <span data-ttu-id="0b0b8-196">Per ottenere l'ora di presentazione del frame corrente, il <xref:System.EventArgs> associato a questo evento può essere convertito come <xref:System.Windows.Media.RenderingEventArgs>, che forniscono un <xref:System.Windows.Media.RenderingEventArgs.RenderingTime%2A> ora di rendering del proprietà che è possibile usare per ottenere il frame corrente.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-196">To obtain the presentation time of the current frame, the <xref:System.EventArgs> associated with this event can be cast as <xref:System.Windows.Media.RenderingEventArgs>, which provide a <xref:System.Windows.Media.RenderingEventArgs.RenderingTime%2A> property that you can use to obtain the current frame's rendering time.</span></span>  
  
 <span data-ttu-id="0b0b8-197">Per altre informazioni, vedere il <xref:System.Windows.Media.CompositionTarget.Rendering> pagina.</span><span class="sxs-lookup"><span data-stu-id="0b0b8-197">For more information, see the <xref:System.Windows.Media.CompositionTarget.Rendering> page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0b0b8-198">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="0b0b8-198">See also</span></span>

- <xref:System.Windows.Media.Animation.AnimationTimeline>
- <xref:System.Windows.Media.Animation.IKeyFrame>
- [<span data-ttu-id="0b0b8-199">Cenni preliminari sulle tecniche di animazione delle proprietà</span><span class="sxs-lookup"><span data-stu-id="0b0b8-199">Property Animation Techniques Overview</span></span>](property-animation-techniques-overview.md)
- [<span data-ttu-id="0b0b8-200">Cenni preliminari sugli oggetti Freezable</span><span class="sxs-lookup"><span data-stu-id="0b0b8-200">Freezable Objects Overview</span></span>](../advanced/freezable-objects-overview.md)
- [<span data-ttu-id="0b0b8-201">Cenni preliminari sulle animazioni con fotogrammi chiave</span><span class="sxs-lookup"><span data-stu-id="0b0b8-201">Key-Frame Animations Overview</span></span>](key-frame-animations-overview.md)
- [<span data-ttu-id="0b0b8-202">Panoramica sulle animazioni tracciato</span><span class="sxs-lookup"><span data-stu-id="0b0b8-202">Path Animations Overview</span></span>](path-animations-overview.md)
- [<span data-ttu-id="0b0b8-203">Cenni preliminari sull'animazione</span><span class="sxs-lookup"><span data-stu-id="0b0b8-203">Animation Overview</span></span>](animation-overview.md)
- [<span data-ttu-id="0b0b8-204">Cenni preliminari sull'animazione e sul sistema di temporizzazione</span><span class="sxs-lookup"><span data-stu-id="0b0b8-204">Animation and Timing System Overview</span></span>](animation-and-timing-system-overview.md)
- [<span data-ttu-id="0b0b8-205">Esempio di animazione personalizzata</span><span class="sxs-lookup"><span data-stu-id="0b0b8-205">Custom Animation Sample</span></span>](https://go.microsoft.com/fwlink/?LinkID=159981)
