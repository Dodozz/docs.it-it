---
title: Sicurezza del flusso di lavoro
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], workflow security
ms.assetid: d712a566-f435-44c0-b8c0-49298e84b114
ms.openlocfilehash: a5a8d4d0d41efb7a255080994c8e18302d302447
ms.sourcegitcommit: 558d78d2a68acd4c95ef23231c8b4e4c7bac3902
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/09/2019
ms.locfileid: "59321692"
---
# <a name="workflow-security"></a><span data-ttu-id="07eb3-102">Sicurezza del flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="07eb3-102">Workflow Security</span></span>
<span data-ttu-id="07eb3-103">Windows Workflow Foundation (WF) si integra con varie tecnologie diverse, ad esempio Microsoft SQL Server e Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="07eb3-103">Windows Workflow Foundation (WF) is integrated with several different technologies, such as Microsoft SQL Server and Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="07eb3-104">L'interazione con queste tecnologie può introdurre problemi di sicurezza nel flusso di lavoro, se eseguito in modo errato.</span><span class="sxs-lookup"><span data-stu-id="07eb3-104">Interacting with these technologies may introduce security issues into your workflow if done improperly.</span></span>

## <a name="persistence-security-concerns"></a><span data-ttu-id="07eb3-105">Problemi di sicurezza della persistenza</span><span class="sxs-lookup"><span data-stu-id="07eb3-105">Persistence Security Concerns</span></span>

1. <span data-ttu-id="07eb3-106">I flussi di lavoro che usano un'attività <xref:System.Activities.Statements.Delay> e la persistenza devono essere riattivati da un servizio.</span><span class="sxs-lookup"><span data-stu-id="07eb3-106">Workflows that use a <xref:System.Activities.Statements.Delay> activity and persistence need to be reactivated by a service.</span></span> <span data-ttu-id="07eb3-107">In Windows AppFabric viene usato il Servizio di gestione flussi di lavoro (WMS) per riattivare i flussi di lavoro con timer scaduti.</span><span class="sxs-lookup"><span data-stu-id="07eb3-107">Windows AppFabric uses the Workflow Management Service (WMS) to reactivate workflows with expired timers.</span></span> <span data-ttu-id="07eb3-108">WMS consente di creare un oggetto <xref:System.ServiceModel.WorkflowServiceHost> per ospitare il flusso di lavoro riattivato.</span><span class="sxs-lookup"><span data-stu-id="07eb3-108">WMS creates a <xref:System.ServiceModel.WorkflowServiceHost> to host the reactivated workflow.</span></span> <span data-ttu-id="07eb3-109">Se il servizio WMS viene arrestato, i flussi di lavoro persistenti non verranno riattivati quando i timer scadono.</span><span class="sxs-lookup"><span data-stu-id="07eb3-109">If the WMS service is stopped, persisted workflows will not be reactivated when their timers expire.</span></span>

2. <span data-ttu-id="07eb3-110">L'accesso alle istanze durevoli dovrebbe essere protetto da entità dannose esterne al dominio applicazione.</span><span class="sxs-lookup"><span data-stu-id="07eb3-110">Access to durable instancing should be protected against malicious entities external to the application domain.</span></span> <span data-ttu-id="07eb3-111">Inoltre, gli sviluppatori devono assicurarsi che il codice dannoso non possa essere eseguito nello stesso dominio applicazione del codice dell'istanza durevole.</span><span class="sxs-lookup"><span data-stu-id="07eb3-111">In addition, developers should ensure that malicious code can't be executed in the same application domain as the durable instancing code.</span></span>

3. <span data-ttu-id="07eb3-112">L'istanza durevole non deve essere eseguita con autorizzazioni (di amministratore) elevate.</span><span class="sxs-lookup"><span data-stu-id="07eb3-112">Durable instancing should not be run with elevated (Administrator) permissions.</span></span>

4. <span data-ttu-id="07eb3-113">I dati che vengono elaborati all'esterno del dominio applicazione devono essere protetti.</span><span class="sxs-lookup"><span data-stu-id="07eb3-113">Data being processed outside the application domain should be protected.</span></span>

5. <span data-ttu-id="07eb3-114">Le applicazioni che richiedono una isolamento di sicurezza non devono condividere la stessa istanza dell'astrazione dello schema.</span><span class="sxs-lookup"><span data-stu-id="07eb3-114">Applications that require security isolation should not share the same instance of the schema abstraction.</span></span> <span data-ttu-id="07eb3-115">Tali applicazioni devono usare provider di archiviazione differenti o provider di archiviazione configurati per l'uso di istanze di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="07eb3-115">Such applications should use different store providers, or store providers configured to use different store instantiations.</span></span>

## <a name="sql-server-security-concerns"></a><span data-ttu-id="07eb3-116">Problemi di sicurezza relativi a SQL Server</span><span class="sxs-lookup"><span data-stu-id="07eb3-116">SQL Server Security Concerns</span></span>

-   <span data-ttu-id="07eb3-117">Quando si usano numerose attività figlio, percorsi, segnalibri, estensioni host o ambiti o quando si usano segnalibri con payload di notevoli dimensioni, la memoria può esaurirsi o si può allocare eccessivo spazio del database durante la persistenza.</span><span class="sxs-lookup"><span data-stu-id="07eb3-117">When large numbers of child activities, locations, bookmarks, host extensions, or scopes are used, or when bookmarks with very large payloads are used, memory can be exhausted, or undue amounts of database space can be allocated during persistence.</span></span> <span data-ttu-id="07eb3-118">Questa situazione può essere attenuata con la sicurezza a livello di oggetto e a livello di database.</span><span class="sxs-lookup"><span data-stu-id="07eb3-118">This can be mitigated by using object-level and database-level security.</span></span>

-   <span data-ttu-id="07eb3-119">Quando si usa l'oggetto <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, l'archivio di istanze deve essere protetto.</span><span class="sxs-lookup"><span data-stu-id="07eb3-119">When using <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, the instance store must be secured.</span></span> <span data-ttu-id="07eb3-120">Per altre informazioni, vedere [SQL Server Best Practices](https://go.microsoft.com/fwlink/?LinkId=164972).</span><span class="sxs-lookup"><span data-stu-id="07eb3-120">For more information, see [SQL Server Best Practices](https://go.microsoft.com/fwlink/?LinkId=164972).</span></span>

-   <span data-ttu-id="07eb3-121">I dati sensibili nell'archivio di istanze devono essere crittografati.</span><span class="sxs-lookup"><span data-stu-id="07eb3-121">Sensitive data in the instance store should be encrypted.</span></span> <span data-ttu-id="07eb3-122">Per altre informazioni, vedere [crittografia di sicurezza SQL](https://go.microsoft.com/fwlink/?LinkId=164976).</span><span class="sxs-lookup"><span data-stu-id="07eb3-122">For more information, see [SQL Security Encryption](https://go.microsoft.com/fwlink/?LinkId=164976).</span></span>

-   <span data-ttu-id="07eb3-123">Poiché la stringa di connessione del database è spesso inclusa in un file di configurazione, è necessario usare la sicurezza a livello di Windows (ACL) per assicurarsi che il file di configurazione (in genere Web.Config) sia protetto e che le informazioni sull'accesso e sulla password non siano incluse nella stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="07eb3-123">Since the database connection string is often included in a configuration file, windows-level security (ACL) should be used to ensure that the configuration file (Web.Config usually) is secure, and that login and password information are not included in the connection string.</span></span> <span data-ttu-id="07eb3-124">Tra il database e il server Web dovrebbe invece essere usata l'autenticazione di Windows.</span><span class="sxs-lookup"><span data-stu-id="07eb3-124">Windows authentication should be used between the database and the web server instead.</span></span>

## <a name="considerations-for-workflowservicehost"></a><span data-ttu-id="07eb3-125">Considerazioni su WorkflowServiceHost</span><span class="sxs-lookup"><span data-stu-id="07eb3-125">Considerations for WorkflowServiceHost</span></span>

-   <span data-ttu-id="07eb3-126">Endpoint Windows Communication Foundation (WCF) usati nei flussi di lavoro deve essere protetto.</span><span class="sxs-lookup"><span data-stu-id="07eb3-126">Windows Communication Foundation (WCF) endpoints used in workflows should be secured.</span></span> <span data-ttu-id="07eb3-127">Per altre informazioni, vedere [Cenni preliminari sulla sicurezza](https://go.microsoft.com/fwlink/?LinkID=164975).</span><span class="sxs-lookup"><span data-stu-id="07eb3-127">For more information, see [WCF Security Overview](https://go.microsoft.com/fwlink/?LinkID=164975).</span></span>

-   <span data-ttu-id="07eb3-128">È possibile implementare l'autorizzazione a livello host usando <xref:System.ServiceModel.ServiceAuthorizationManager>.</span><span class="sxs-lookup"><span data-stu-id="07eb3-128">Host-level authorization can be implemented by using <xref:System.ServiceModel.ServiceAuthorizationManager>.</span></span> <span data-ttu-id="07eb3-129">Vedere [come: Creare un gestore autorizzazioni personalizzato per un servizio](https://go.microsoft.com/fwlink/?LinkId=192228) per informazioni dettagliate.</span><span class="sxs-lookup"><span data-stu-id="07eb3-129">See [How To: Create a Custom Authorization Manager for a Service](https://go.microsoft.com/fwlink/?LinkId=192228) for details.</span></span>

-   <span data-ttu-id="07eb3-130">L'oggetto ServiceSecurityContext per il messaggio in arrivo è disponibile anche dall'interno del flusso di lavoro tramite l'accesso a OperationContext.</span><span class="sxs-lookup"><span data-stu-id="07eb3-130">The ServiceSecurityContext for the incoming message is also available from within workflow by accessing OperationContext.</span></span>

## <a name="wf-security-pack-ctp"></a><span data-ttu-id="07eb3-131">WF Security Pack CTP</span><span class="sxs-lookup"><span data-stu-id="07eb3-131">WF Security Pack CTP</span></span>
 <span data-ttu-id="07eb3-132">Microsoft WF Security Pack CTP 1 è la prima versione di anteprima (CTP) tecnologia della community di un set di attività e relative implementazioni basato su [Windows Workflow Foundation](index.md) nelle [.NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF 4) e il [Windows Identity Foundation (WIF)](../security/index.md).</span><span class="sxs-lookup"><span data-stu-id="07eb3-132">The Microsoft WF Security Pack CTP 1 is the first community technology preview (CTP) release of a set of activities and their implementation based on [Windows Workflow Foundation](index.md) in [.NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF 4) and the [Windows Identity Foundation (WIF)](../security/index.md).</span></span>  <span data-ttu-id="07eb3-133">Microsoft WF Security Pack CTP 1 contiene sia le attività e che le finestre di progettazione che illustrano come attivare facilmente i diversi scenari relativi alla sicurezza mediante il flusso di lavoro, tra cui:</span><span class="sxs-lookup"><span data-stu-id="07eb3-133">The Microsoft WF Security Pack CTP 1 contains both activities and their designers which illustrate how to easily enable various security-related scenarios using workflow, including:</span></span>

1. <span data-ttu-id="07eb3-134">Rappresentazione di un'identità client nel flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="07eb3-134">Impersonating a client identity in the workflow</span></span>

2. <span data-ttu-id="07eb3-135">Autorizzazione nel flusso di lavoro, come PrincipalPermission e la convalida delle attestazioni</span><span class="sxs-lookup"><span data-stu-id="07eb3-135">In-workflow authorization, such as PrincipalPermission and validation of Claims</span></span>

3. <span data-ttu-id="07eb3-136">La messaggistica autenticata usando ClientCredentials specificato nel flusso di lavoro, ad esempio il nome utente/password o un token recuperato da un servizio token di sicurezza (STS)</span><span class="sxs-lookup"><span data-stu-id="07eb3-136">Authenticated messaging using ClientCredentials specified in the workflow, such as username/password or a token retrieved from a Security Token Service (STS)</span></span>

4. <span data-ttu-id="07eb3-137">Propagazione di un token di sicurezza client a un servizio back-end (delega basata su richieste) usando ActAs di WS-Trust</span><span class="sxs-lookup"><span data-stu-id="07eb3-137">Flowing a client security token to a back-end service (claims-based delegation) using WS-Trust ActAs</span></span>

<span data-ttu-id="07eb3-138">Per altre informazioni e per scaricare WF Security Pack CTP, vedere: [WF Security Pack CTP](https://archive.codeplex.com/?p=wf)</span><span class="sxs-lookup"><span data-stu-id="07eb3-138">For more information and to download the WF Security Pack CTP, see: [WF Security Pack CTP](https://archive.codeplex.com/?p=wf)</span></span>