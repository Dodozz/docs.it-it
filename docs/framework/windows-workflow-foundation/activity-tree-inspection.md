---
title: Ispezione dell'albero delle attività
ms.date: 03/30/2017
ms.assetid: 100d00e4-8c1d-4233-8fbb-dd443a01155d
ms.openlocfilehash: 014795b79b3536b387096e4de64266e26649da21
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/23/2019
ms.locfileid: "61774125"
---
# <a name="activity-tree-inspection"></a><span data-ttu-id="41e5f-102">Ispezione dell'albero delle attività</span><span class="sxs-lookup"><span data-stu-id="41e5f-102">Activity Tree Inspection</span></span>
<span data-ttu-id="41e5f-103">L'ispezione dell'albero delle attività viene usata dagli autori dell'applicazione flusso di lavoro per controllare i flussi di lavoro ospitati dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="41e5f-103">Activity tree inspection is used by workflow application authors to inspect the workflows hosted by the application.</span></span> <span data-ttu-id="41e5f-104">Tramite l'oggetto <xref:System.Activities.WorkflowInspectionServices>, nei flussi di lavoro è possibile cercare attività figlio specifiche, enumerare attività singole e le relative proprietà, nonché memorizzare nella cache i metadati di runtime delle attività in un momento specifico.</span><span class="sxs-lookup"><span data-stu-id="41e5f-104">By using <xref:System.Activities.WorkflowInspectionServices>, workflows can be searched for specific child activities, individual activities and their properties can be enumerated, and runtime metadata of the activities can be cached at a specific time.</span></span> <span data-ttu-id="41e5f-105">In questo argomento viene fornita una panoramica sull'oggetto <xref:System.Activities.WorkflowInspectionServices> e viene descritto come usarlo per controllare un albero delle attività.</span><span class="sxs-lookup"><span data-stu-id="41e5f-105">This topic provides an overview of <xref:System.Activities.WorkflowInspectionServices> and how to use it to inspect an activity tree.</span></span>  
  
## <a name="using-workflowinspectionservices"></a><span data-ttu-id="41e5f-106">Utilizzo dell'oggetto WorkflowInspectionServices</span><span class="sxs-lookup"><span data-stu-id="41e5f-106">Using WorkflowInspectionServices</span></span>  
 <span data-ttu-id="41e5f-107">Il metodo <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> viene usato per enumerare tutte le attività nell'albero delle attività specificato.</span><span class="sxs-lookup"><span data-stu-id="41e5f-107">The <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> method is used to enumerate all of the activities in the specified activity tree.</span></span> <span data-ttu-id="41e5f-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> restituisce un enumerabile che tocca tutte le attività all'interno dell'albero, inclusi gli elementi figlio, i gestori delegato, le impostazioni predefinite variabili e le espressioni argomento.</span><span class="sxs-lookup"><span data-stu-id="41e5f-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> returns an enumerable that touches all activities within the tree including children, delegate handlers, variable defaults, and argument expressions.</span></span> <span data-ttu-id="41e5f-109">Nell'esempio seguente viene creata una definizione di flusso di lavoro tramite gli oggetti <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.While>, <xref:System.Activities.Statements.ForEach%601>, <xref:System.Activities.Statements.WriteLine> e le espressioni.</span><span class="sxs-lookup"><span data-stu-id="41e5f-109">In the following example, a workflow definition is created by using a <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.While>, <xref:System.Activities.Statements.ForEach%601>, <xref:System.Activities.Statements.WriteLine>, and expressions.</span></span> <span data-ttu-id="41e5f-110">Una volta creata, la definizione di flusso di lavoro viene richiamata, quindi viene chiamato il metodo `InspectActivity`.</span><span class="sxs-lookup"><span data-stu-id="41e5f-110">After the workflow definition is created, it is invoked and then the `InspectActivity` method is called.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#45](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#45)]  
  
 <span data-ttu-id="41e5f-111">Per enumerare le attività, viene chiamato <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> nell'attività radice e di nuovo in modo ricorsivo in ogni attività restituita.</span><span class="sxs-lookup"><span data-stu-id="41e5f-111">To enumerate the activities, the <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is called on the root activity, and again recursively on each returned activity.</span></span> <span data-ttu-id="41e5f-112">Nell'esempio seguente la proprietà <xref:System.Activities.Activity.DisplayName%2A> di ogni attività ed espressione dell'albero delle attività viene scritta nella console.</span><span class="sxs-lookup"><span data-stu-id="41e5f-112">In the following example, the <xref:System.Activities.Activity.DisplayName%2A> of each activity and expression in the activity tree is written to the console.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#46](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#46)]  
  
 <span data-ttu-id="41e5f-113">Questo codice di esempio fornisce l'output seguente.</span><span class="sxs-lookup"><span data-stu-id="41e5f-113">This sample code provides the following output.</span></span>  
  
 <span data-ttu-id="41e5f-114">**Voce di elenco 1**</span><span class="sxs-lookup"><span data-stu-id="41e5f-114">**List Item 1**</span></span>  
<span data-ttu-id="41e5f-115">**Elencare l'elemento 2** </span><span class="sxs-lookup"><span data-stu-id="41e5f-115">**List Item 2** </span></span>  
<span data-ttu-id="41e5f-116">**Elemento dell'elenco 3** </span><span class="sxs-lookup"><span data-stu-id="41e5f-116">**List Item 3** </span></span>  
<span data-ttu-id="41e5f-117">**Elemento dell'elenco 4** </span><span class="sxs-lookup"><span data-stu-id="41e5f-117">**List Item 4** </span></span>  
<span data-ttu-id="41e5f-118">**Elemento dell'elenco 5** </span><span class="sxs-lookup"><span data-stu-id="41e5f-118">**List Item 5** </span></span>  
<span data-ttu-id="41e5f-119">**Elementi aggiunti alla raccolta.** </span><span class="sxs-lookup"><span data-stu-id="41e5f-119">**Items added to collection.** </span></span>  
<span data-ttu-id="41e5f-120">**Sequenza** </span><span class="sxs-lookup"><span data-stu-id="41e5f-120">**Sequence** </span></span>  
 <span data-ttu-id="41e5f-121">**Valore letterale < elenco\<stringa >>**</span><span class="sxs-lookup"><span data-stu-id="41e5f-121">**Literal<List\<String>>**</span></span>  
 <span data-ttu-id="41e5f-122">**While**</span><span class="sxs-lookup"><span data-stu-id="41e5f-122">**While**</span></span>  
 <span data-ttu-id="41e5f-123">**AddToCollection\<String>**</span><span class="sxs-lookup"><span data-stu-id="41e5f-123">**AddToCollection\<String>**</span></span>  
 <span data-ttu-id="41e5f-124">**Valorevariabile < ICollection\<stringa >>**</span><span class="sxs-lookup"><span data-stu-id="41e5f-124">**VariableValue<ICollection\<String>>**</span></span>  
 <span data-ttu-id="41e5f-125">**LambdaValue\<String>**</span><span class="sxs-lookup"><span data-stu-id="41e5f-125">**LambdaValue\<String>**</span></span>  
 <span data-ttu-id="41e5f-126">**LocationReferenceValue < elenco\<stringa >>**</span><span class="sxs-lookup"><span data-stu-id="41e5f-126">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="41e5f-127">**LambdaValue\<Boolean>**</span><span class="sxs-lookup"><span data-stu-id="41e5f-127">**LambdaValue\<Boolean>**</span></span>  
 <span data-ttu-id="41e5f-128">**LocationReferenceValue < elenco\<stringa >>**</span><span class="sxs-lookup"><span data-stu-id="41e5f-128">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="41e5f-129">**ForEach\<String>**</span><span class="sxs-lookup"><span data-stu-id="41e5f-129">**ForEach\<String>**</span></span>  
 <span data-ttu-id="41e5f-130">**VariableValue<IEnumerable\<String>>**</span><span class="sxs-lookup"><span data-stu-id="41e5f-130">**VariableValue<IEnumerable\<String>>**</span></span>  
 <span data-ttu-id="41e5f-131">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="41e5f-131">**WriteLine**</span></span>  
 <span data-ttu-id="41e5f-132">**DelegateArgumentValue\<String>**</span><span class="sxs-lookup"><span data-stu-id="41e5f-132">**DelegateArgumentValue\<String>**</span></span>  
 <span data-ttu-id="41e5f-133">**Sequence**</span><span class="sxs-lookup"><span data-stu-id="41e5f-133">**Sequence**</span></span>  
 <span data-ttu-id="41e5f-134">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="41e5f-134">**WriteLine**</span></span>  
 <span data-ttu-id="41e5f-135">**Valore letterale\<String >** per recuperare un'attività specifica anziché enumerare tutte le attività, <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> viene usato.</span><span class="sxs-lookup"><span data-stu-id="41e5f-135">**Literal\<String>**  To retrieve a specific activity instead of enumerating all of the activities, <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> is used.</span></span> <span data-ttu-id="41e5f-136">Entrambi i metodi <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> e <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> eseguono la memorizzazione dei metadati nella cache se non è stato precedentemente chiamato l'oggetto `WorkflowInspectionServices.CacheMetadata`.</span><span class="sxs-lookup"><span data-stu-id="41e5f-136">Both <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> and <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> perform metadata caching if `WorkflowInspectionServices.CacheMetadata` has not been previously called.</span></span> <span data-ttu-id="41e5f-137">Se il metodo <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> è stato chiamato, il metodo <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> si basa sui metadati esistenti.</span><span class="sxs-lookup"><span data-stu-id="41e5f-137">If <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> has been called then <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is based on the existing metadata.</span></span> <span data-ttu-id="41e5f-138">Pertanto, se sono state apportate modifiche all'albero dall'ultima chiamata al metodo <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>, il metodo <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> potrebbe fornire risultati imprevisti.</span><span class="sxs-lookup"><span data-stu-id="41e5f-138">Therefore, if tree changes have been made since the last call to <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> might give unexpected results.</span></span> <span data-ttu-id="41e5f-139">Se sono state apportate modifiche al flusso di lavoro dopo la chiamata <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>, i metadati possono essere memorizzati nuovamente chiamando la <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> (metodo).</span><span class="sxs-lookup"><span data-stu-id="41e5f-139">If changes have been made to the workflow after calling <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>, metadata can be re-cached by calling the <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> method.</span></span> <span data-ttu-id="41e5f-140">La memorizzazione dei metadati nella cache è descritta nella prossima sezione.</span><span class="sxs-lookup"><span data-stu-id="41e5f-140">Caching metadata is discussed in the next section.</span></span>  
  
### <a name="caching-metadata"></a><span data-ttu-id="41e5f-141">Memorizzazione dei metadati nella cache</span><span class="sxs-lookup"><span data-stu-id="41e5f-141">Caching Metadata</span></span>  
 <span data-ttu-id="41e5f-142">La memorizzazione dei metadati nella cache per un'attività compila e convalida una descrizione degli argomenti dell'attività, delle variabili, delle attività figlio e dei delegati di attività.</span><span class="sxs-lookup"><span data-stu-id="41e5f-142">Caching the metadata for an activity builds and validates a description of the activity’s arguments, variables, child activities, and activity delegates.</span></span> <span data-ttu-id="41e5f-143">Per impostazione predefinita, i metadati vengono memorizzati nella cache dal runtime quando un'attività viene preparata per l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="41e5f-143">Metadata, by default, is cached by the runtime when an activity is prepared for execution.</span></span> <span data-ttu-id="41e5f-144">Se un autore dell'host del flusso di lavoro desidera memorizzare i metadati nella cache per un'attività o un albero delle attività prima di questa fase, ad esempio per accettare in anticipo tutto il costo, è possibile usare il metodo <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> per memorizzare i metadati nella cache nel momento desiderato.</span><span class="sxs-lookup"><span data-stu-id="41e5f-144">If a workflow host author wants to cache the metadata for an activity or activity tree before this, for example to take all of the cost upfront, then <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> can be used to cache the metadata at the desired time.</span></span>
