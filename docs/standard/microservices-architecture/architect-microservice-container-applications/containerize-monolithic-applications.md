---
title: Inserimento di applicazioni monolitiche nei contenitori
description: L'inserimento di applicazioni monolitiche nei contenitori, anche se non consente di usufruire di tutti i vantaggi dell'architettura dei microservizi, offre fin dall'inizio vantaggi notevoli per la distribuzione.
ms.date: 09/20/2018
ms.openlocfilehash: 9e457fba56c8fdf946618fca10285f4c0a343af4
ms.sourcegitcommit: d8ebe0ee198f5d38387a80ba50f395386779334f
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 06/05/2019
ms.locfileid: "66690537"
---
# <a name="containerizing-monolithic-applications"></a><span data-ttu-id="e3002-103">Inserimento di applicazioni monolitiche nei contenitori</span><span class="sxs-lookup"><span data-stu-id="e3002-103">Containerizing monolithic applications</span></span>

<span data-ttu-id="e3002-104">Può essere utile creare una singola applicazione o un singolo servizio Web con distribuzione monolitica e distribuirli come contenitore.</span><span class="sxs-lookup"><span data-stu-id="e3002-104">You might want to build a single, monolithically deployed web application or service and deploy it as a container.</span></span> <span data-ttu-id="e3002-105">L'applicazione stessa potrebbe non essere internamente monolitica, ma strutturata come diverse librerie, componenti o persino livelli (livello dell'applicazione, livello di accesso ai dati, ecc.).</span><span class="sxs-lookup"><span data-stu-id="e3002-105">The application itself might not be internally monolithic, but structured as several libraries, components, or even layers (application layer, domain layer, data-access layer, etc.).</span></span> <span data-ttu-id="e3002-106">Esternamente, però, si tratta di un singolo contenitore, cioè di un singolo processo, di una singola applicazione Web o di un singolo servizio.</span><span class="sxs-lookup"><span data-stu-id="e3002-106">Externally, however, it's a single container—a single process, a single web application, or a single service.</span></span>

<span data-ttu-id="e3002-107">Per gestire questo modello, distribuire un singolo contenitore per rappresentare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e3002-107">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="e3002-108">Per aumentare la capacità, è possibile aumentare il numero di istanze, in altre parole, è sufficiente aggiungere altre copie con un servizio di bilanciamento del carico al di sopra di queste.</span><span class="sxs-lookup"><span data-stu-id="e3002-108">To increase capacity, you scale out, that is, just add more copies with a load balancer in front.</span></span> <span data-ttu-id="e3002-109">La semplicità deriva dalla gestione di un'unica distribuzione in un singolo contenitore o una singola macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="e3002-109">The simplicity comes from managing a single deployment in a single container or VM.</span></span>

![La maggior parte delle funzionalità di un'applicazione monolitica nei contenitori si trova in un singolo contenitore, con livelli interni o librerie. È possibile ampliare un'applicazione di questo tipo clonando il contenitore in più server o macchine virtuali](./media/image1.png)

<span data-ttu-id="e3002-111">**Figura 4-1**.</span><span class="sxs-lookup"><span data-stu-id="e3002-111">**Figure 4-1**.</span></span> <span data-ttu-id="e3002-112">Esempio dell'architettura di un'applicazione monolitica inclusa in contenitori</span><span class="sxs-lookup"><span data-stu-id="e3002-112">Example of the architecture of a containerized monolithic application</span></span>

<span data-ttu-id="e3002-113">È possibile includere più componenti, librerie o livelli interni in ogni contenitore, come illustrato nella figura 4-1.</span><span class="sxs-lookup"><span data-stu-id="e3002-113">You can include multiple components, libraries, or internal layers in each container, as illustrated in Figure 4-1.</span></span> <span data-ttu-id="e3002-114">Questo schema monolitico è in conflitto con il principio secondo il quale un contenitore esegue una sola operazione in un unico processo, ma in alcuni casi può comunque essere adatto.</span><span class="sxs-lookup"><span data-stu-id="e3002-114">However, this monolithic pattern might conflict with the container principle "a container does one thing, and does it in one process", but might be ok for some cases.</span></span>

<span data-ttu-id="e3002-115">Lo svantaggio di questo approccio diventa evidente con l'eventuale crescita dell'applicazione, che ne richiede la scalabilità.</span><span class="sxs-lookup"><span data-stu-id="e3002-115">The downside of this approach becomes evident if the application grows, requiring it to scale.</span></span> <span data-ttu-id="e3002-116">Se è possibile ridimensionare l'intera applicazione, questo non rappresenta un problema.</span><span class="sxs-lookup"><span data-stu-id="e3002-116">If the entire application can scale, it isn't really a problem.</span></span> <span data-ttu-id="e3002-117">Tuttavia, nella maggior parte dei casi, solo alcune parti dell'applicazione rappresentano colli di bottiglia che richiedono il ridimensionamento, mentre altri componenti vengono usati di meno.</span><span class="sxs-lookup"><span data-stu-id="e3002-117">However, in most cases, just a few parts of the application are the choke points that requiring scaling, while other components are used less.</span></span>

<span data-ttu-id="e3002-118">Ad esempio, in una tipica applicazione di e-commerce, potrebbe essere necessario ridimensionare il sottosistema delle informazioni sul prodotto, perché molti più clienti danno un'occhiata ai prodotti prima di acquistarli.</span><span class="sxs-lookup"><span data-stu-id="e3002-118">For example, in a typical e-commerce application, you likely need to scale the product information subsystem, because many more customers browse products than purchase them.</span></span> <span data-ttu-id="e3002-119">Molti più clienti usano il carrello per poi usare la pipeline di pagamento,</span><span class="sxs-lookup"><span data-stu-id="e3002-119">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="e3002-120">meno clienti aggiungono commenti o visualizzano la cronologia degli acquisti.</span><span class="sxs-lookup"><span data-stu-id="e3002-120">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="e3002-121">E potrebbe anche capitare che solo pochi dipendenti abbiano bisogno di gestire i contenuti e le campagne di marketing.</span><span class="sxs-lookup"><span data-stu-id="e3002-121">And you might have only a handful of employees, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="e3002-122">Se si modifica la scala della progettazione monolitica, tutto il codice per le diverse attività viene distribuito più volte e scalato allo stesso grado.</span><span class="sxs-lookup"><span data-stu-id="e3002-122">If you scale the monolithic design, all the code for these different tasks is deployed multiple times and scaled at the same grade.</span></span>

<span data-ttu-id="e3002-123">Esistono diversi modi per ridimensionare un'applicazione: duplicazione orizzontale, suddivisione di aree diverse dell'applicazione e partizionamento di concetti o dati aziendali simili.</span><span class="sxs-lookup"><span data-stu-id="e3002-123">There are multiple ways to scale an application-horizontal duplication, splitting different areas of the application, and partitioning similar business concepts or data.</span></span> <span data-ttu-id="e3002-124">Tuttavia, oltre al problema di ridimensionamento di tutti i componenti, le modifiche apportate a un singolo componente richiedono la completa riesecuzione del test dell'intera applicazione e una ridistribuzione completa di tutte le istanze.</span><span class="sxs-lookup"><span data-stu-id="e3002-124">But, in addition to the problem of scaling all components, changes to a single component require complete retesting of the entire application, and a complete redeployment of all the instances.</span></span>

<span data-ttu-id="e3002-125">Tuttavia, l'approccio monolitico è comune, perché lo sviluppo dell'applicazione è inizialmente più semplice rispetto agli approcci ai microservizi.</span><span class="sxs-lookup"><span data-stu-id="e3002-125">However, the monolithic approach is common, because the development of the application is initially easier than for microservices approaches.</span></span> <span data-ttu-id="e3002-126">Di conseguenza, molte organizzazioni sviluppano applicazioni usando questo approccio architetturale.</span><span class="sxs-lookup"><span data-stu-id="e3002-126">Thus, many organizations develop using this architectural approach.</span></span> <span data-ttu-id="e3002-127">Nonostante alcune organizzazioni abbiano ottenuto risultati sufficienti, altre raggiungeranno ben presto i limiti prefissati.</span><span class="sxs-lookup"><span data-stu-id="e3002-127">While some organizations have had good enough results, others are hitting limits.</span></span> <span data-ttu-id="e3002-128">Anni fa, molte organizzazioni progettavano le proprie applicazioni usando questo modello, perché con gli strumenti e l'infrastruttura a loro disposizione era troppo difficile creare architetture orientate ai servizi, e quindi non ne vedevano la necessità fino a quando le dimensioni dell'applicazione non aumentavano.</span><span class="sxs-lookup"><span data-stu-id="e3002-128">Many organizations designed their applications using this model because tools and infrastructure made it too difficult to build service-oriented architectures (SOA) years ago, and they did not see the need-until the application grew.</span></span>

<span data-ttu-id="e3002-129">Dal punto di vista dell'infrastruttura, ogni server può eseguire molte applicazioni all'interno dello stesso host e mostrare un rapporto accettabile di efficienza nell'utilizzo di risorse, come illustrato nella figura 4-2.</span><span class="sxs-lookup"><span data-stu-id="e3002-129">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in resources usage, as shown in Figure 4-2.</span></span>

![Un host può eseguire diverse app monolitiche, ognuna in un contenitore separato.](./media/image2.png)

<span data-ttu-id="e3002-131">**Figura 4-2**.</span><span class="sxs-lookup"><span data-stu-id="e3002-131">**Figure 4-2**.</span></span> <span data-ttu-id="e3002-132">Approccio monolitico: host che esegue più applicazioni, ciascuna delle quali in esecuzione come contenitore</span><span class="sxs-lookup"><span data-stu-id="e3002-132">Monolithic approach: Host running multiple apps, each app running as a container</span></span>

<span data-ttu-id="e3002-133">Le applicazioni monolitiche in Microsoft Azure possono essere distribuite usando macchine virtuali dedicate per ogni istanza.</span><span class="sxs-lookup"><span data-stu-id="e3002-133">Monolithic applications in Microsoft Azure can be deployed using dedicated VMs for each instance.</span></span> <span data-ttu-id="e3002-134">Con i [set di scalabilità di macchine virtuali di Microsoft Azure](https://azure.microsoft.com/documentation/services/virtual-machine-scale-sets/) è anche possibile ridimensionare facilmente le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="e3002-134">Additionally, using [Azure virtual machine scale sets](https://azure.microsoft.com/documentation/services/virtual-machine-scale-sets/), you can easily scale the VMs.</span></span> <span data-ttu-id="e3002-135">Anche il [Servizio app di Azure](https://azure.microsoft.com/services/app-service/) può eseguire applicazioni monolitiche e scalare facilmente le istanze senza la necessità di gestire le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="e3002-135">[Azure App Service](https://azure.microsoft.com/services/app-service/) can also run monolithic applications and easily scale instances without requiring you to manage the VMs.</span></span> <span data-ttu-id="e3002-136">Dal 2016, i Servizi app di Azure possono eseguire anche singole istanze di contenitori Docker, semplificando la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="e3002-136">Since 2016, Azure App Services can run single instances of Docker containers as well, simplifying deployment.</span></span>

<span data-ttu-id="e3002-137">In un ambiente di controllo di qualità o ambiente di produzione limitato, è possibile distribuire più macchine virtuali host Docker e bilanciarle usando il bilanciamento del carico di Azure, come illustrato in figura 4-3.</span><span class="sxs-lookup"><span data-stu-id="e3002-137">As a QA environment or a limited production environment, you can deploy multiple Docker host VMs and balance them using the Azure balancer, as shown in Figure 4-3.</span></span> <span data-ttu-id="e3002-138">Ciò consente di gestire il ridimensionamento con un approccio con granularità grossolana, perché l'intera applicazione risiede all'interno di un singolo contenitore.</span><span class="sxs-lookup"><span data-stu-id="e3002-138">This lets you manage scaling with a coarse-grain approach, because the whole application lives within a single container.</span></span>

![Host diversi, ognuno dei quali esegue un contenitore con l'applicazione monolitica.](./media/image3.png)

<span data-ttu-id="e3002-140">**Figura 4-3**.</span><span class="sxs-lookup"><span data-stu-id="e3002-140">**Figure 4-3**.</span></span> <span data-ttu-id="e3002-141">Esempio di più host che scalano verticalmente una singola applicazione contenitore</span><span class="sxs-lookup"><span data-stu-id="e3002-141">Example of multiple hosts scaling up a single container application</span></span>

<span data-ttu-id="e3002-142">La distribuzione ai vari host può essere gestita con le tecniche di distribuzione tradizionali.</span><span class="sxs-lookup"><span data-stu-id="e3002-142">Deployment to the various hosts can be managed with traditional deployment techniques.</span></span> <span data-ttu-id="e3002-143">Gli host Docker possono essere gestiti con comandi come `docker run` o `docker-compose` eseguiti manualmente o con l'automazione, ad esempio le pipeline di recapito continuo (CD).</span><span class="sxs-lookup"><span data-stu-id="e3002-143">Docker hosts can be managed with commands like `docker run` or `docker-compose` performed manually, or through automation such as continuous delivery (CD) pipelines.</span></span>

## <a name="deploying-a-monolithic-application-as-a-container"></a><span data-ttu-id="e3002-144">Distribuzione di un'applicazione monolitica come contenitore</span><span class="sxs-lookup"><span data-stu-id="e3002-144">Deploying a monolithic application as a container</span></span>

<span data-ttu-id="e3002-145">Esistono vantaggi derivanti dall'uso di contenitori per gestire le distribuzioni di applicazioni monolitiche.</span><span class="sxs-lookup"><span data-stu-id="e3002-145">There are benefits to using containers to manage monolithic application deployments.</span></span> <span data-ttu-id="e3002-146">Il ridimensionamento di istanze di contenitori è molto più veloce e semplice rispetto alla distribuzione di macchine virtuali aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="e3002-146">Scaling container instances is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="e3002-147">Anche se si usano set di scalabilità di macchine virtuali, l'avvio delle macchine virtuali richiede tempo.</span><span class="sxs-lookup"><span data-stu-id="e3002-147">Even if you use virtual machine scale sets, VMs take time to start.</span></span> <span data-ttu-id="e3002-148">Quando l'applicazione viene distribuita sotto forma di istanze tradizionali anziché in contenitori, la sua configurazione viene gestita come parte della configurazione della macchina virtuale, il che non rappresenta una condizione ideale.</span><span class="sxs-lookup"><span data-stu-id="e3002-148">When deployed as traditional application instances instead of containers, the configuration of the application is managed as part of the VM, which isn't ideal.</span></span>

<span data-ttu-id="e3002-149">La distribuzione degli aggiornamenti come immagini Docker è molto più veloce ed efficiente per la rete.</span><span class="sxs-lookup"><span data-stu-id="e3002-149">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="e3002-150">Le immagini Docker si avviano in genere in pochi secondi, velocizzando le implementazioni.</span><span class="sxs-lookup"><span data-stu-id="e3002-150">Docker images typically start in seconds, which speeds rollouts.</span></span> <span data-ttu-id="e3002-151">Per chiudere un'istanza di un'immagine Docker è sufficiente emettere un comando `docker stop`, che in l'operazione viene completata in meno di un secondo.</span><span class="sxs-lookup"><span data-stu-id="e3002-151">Tearing down a Docker image instance is as easy as issuing a `docker stop` command, and typically completes in less than a second.</span></span>

<span data-ttu-id="e3002-152">Dal momento che, in base alle caratteristiche progettuali, i contenitori non sono modificabili, non è mai necessario preoccuparsi delle macchine virtuali danneggiate.</span><span class="sxs-lookup"><span data-stu-id="e3002-152">Because containers are immutable by design, you never need to worry about corrupted VMs.</span></span> <span data-ttu-id="e3002-153">Al contrario, gli script di aggiornamento per una macchina virtuale potrebbero dimenticare di tenere conto di alcune configurazioni specifiche o alcuni file disponibili su disco.</span><span class="sxs-lookup"><span data-stu-id="e3002-153">In contrast, update scripts for a VM might forget to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="e3002-154">Le applicazioni monolitiche possano trarre vantaggio da Docker, ma in questo articolo i vantaggi vengono trattati solo in modo rapido.</span><span class="sxs-lookup"><span data-stu-id="e3002-154">While monolithic applications can benefit from Docker, we're touching only on the benefits.</span></span> <span data-ttu-id="e3002-155">Altri vantaggi della gestione dei contenitori derivano dalla distribuzione con agenti di orchestrazione del contenitore, che gestiscono le varie istanze e il ciclo di vita di ciascuna istanza di contenitore.</span><span class="sxs-lookup"><span data-stu-id="e3002-155">Additional benefits of managing containers come from deploying with container orchestrators, which manage the various instances and lifecycle of each container instance.</span></span> <span data-ttu-id="e3002-156">La suddivisione dell'applicazione monolitica in sottosistemi scalabili, sviluppabili e distribuibili a livello individuale è il punto di ingresso al campo dei microservizi.</span><span class="sxs-lookup"><span data-stu-id="e3002-156">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

## <a name="publishing-a-single-container-based-application-to-azure-app-service"></a><span data-ttu-id="e3002-157">Pubblicazione di un'applicazione basata su un singolo contenitore nel Servizio App di Azure</span><span class="sxs-lookup"><span data-stu-id="e3002-157">Publishing a single-container-based application to Azure App Service</span></span>

<span data-ttu-id="e3002-158">Se si vuole ottenere la convalida di un contenitore distribuito in Azure o quando un'applicazione è semplicemente un'applicazione a un solo contenitore, il Servizio app di Azure offre un ottimo modo per fornire servizi scalabili basati su un singolo contenitore.</span><span class="sxs-lookup"><span data-stu-id="e3002-158">Whether you want to get validation of a container deployed to Azure or when an application is simply a single-container application, Azure App Service provides a great way to provide scalable single-container-based services.</span></span> <span data-ttu-id="e3002-159">L'uso del Servizio app di Azure è semplice</span><span class="sxs-lookup"><span data-stu-id="e3002-159">Using Azure App Service is simple.</span></span> <span data-ttu-id="e3002-160">e offre un'ottima integrazione con Git per semplificare la creazione del codice in Visual Studio e la sua distribuzione diretta in Azure.</span><span class="sxs-lookup"><span data-stu-id="e3002-160">It provides great integration with Git to make it easy to take your code, build it in Visual Studio, and deploy it directly to Azure.</span></span>

![Procedura guidata per la pubblicazione di un'applicazione a un solo contenitore nel Servizio app di Azure da Visual Studio](./media/image4.png)

<span data-ttu-id="e3002-162">**Figura 4-4**.</span><span class="sxs-lookup"><span data-stu-id="e3002-162">**Figure 4-4**.</span></span> <span data-ttu-id="e3002-163">Pubblicazione di un'applicazione a un solo contenitore nel Servizio App di Azure da Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e3002-163">Publishing a single-container application to Azure App Service from Visual Studio</span></span>

<span data-ttu-id="e3002-164">Senza Docker, se erano necessari altri framework, funzionalità o dipendenze non supportati nel Servizio app di Azure, bisognava attendere che il team di Azure aggiornasse tali dipendenze nel Servizio app.</span><span class="sxs-lookup"><span data-stu-id="e3002-164">Without Docker, if you needed other capabilities, frameworks, or dependencies that aren't supported in Azure App Service, you had to wait until the Azure team updated those dependencies in App Service.</span></span> <span data-ttu-id="e3002-165">Alternativa si doveva passare ad altri servizi, ad esempio servizi Cloud di Azure o macchine virtuali, in cui si otteneva un ulteriore controllo e si è stato possibile installare un componente richiesto o un framework per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e3002-165">Or you had to switch to other services like Azure Cloud Services or VMs, where you had further control and you could install a required component or framework for your application.</span></span>

<span data-ttu-id="e3002-166">Supporto dei contenitori in Visual Studio 2017 e versioni successive offre la possibilità di includere gli elementi desiderati dell'ambiente dell'applicazione, come illustrato nella figura 4-4.</span><span class="sxs-lookup"><span data-stu-id="e3002-166">Container support in Visual Studio 2017 and later gives you the ability to include whatever you want in your application environment, as shown in Figure 4-4.</span></span> <span data-ttu-id="e3002-167">Dal momento che l'esecuzione avviene in un contenitore, se si aggiunge una dipendenza all'applicazione, è possibile includere tale dipendenza nel Dockerfile o nell'immagine Docker.</span><span class="sxs-lookup"><span data-stu-id="e3002-167">Since you're running it in a container, if you add a dependency to your application, you can include the dependency in your Dockerfile or Docker image.</span></span>

<span data-ttu-id="e3002-168">Come illustrato anche nella figura 4-4, il flusso di pubblicazione esegue il push di un'immagine con un registro contenitori.</span><span class="sxs-lookup"><span data-stu-id="e3002-168">As also shown in Figure 4-4, the publish flow pushes an image through a container registry.</span></span> <span data-ttu-id="e3002-169">Può trattarsi del Registro Azure Container (un registro vicino alle distribuzioni in Azure e protetto dai gruppi e dagli account di Azure Active Directory) oppure di qualsiasi altro registro di Docker, come l'hub Docker o un registro locale.</span><span class="sxs-lookup"><span data-stu-id="e3002-169">This can be the Azure Container Registry (a registry close to your deployments in Azure and secured by Azure Active Directory groups and accounts), or any other Docker registry, like Docker Hub or an on-premises registry.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="e3002-170">[Precedente](index.md)
>[Successivo](docker-application-state-data.md)</span><span class="sxs-lookup"><span data-stu-id="e3002-170">[Previous](index.md)
[Next](docker-application-state-data.md)</span></span>
