---
title: Considerazioni sull'architettura senza server - App senza server
description: Comprendere le sfide di progettazione di applicazioni senza server, da un archivio permanente per la scalabilità di gestione dello stato di registrazione e traccia e diagnostica.
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: b12a09c0fcef7e7ff954a3f959fb9e3080a6e859
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/23/2019
ms.locfileid: "61940946"
---
# <a name="serverless-architecture-considerations"></a><span data-ttu-id="a644e-103">Considerazioni sull'architettura serverless</span><span class="sxs-lookup"><span data-stu-id="a644e-103">Serverless architecture considerations</span></span>

<span data-ttu-id="a644e-104">Adottare un'architettura senza server dotati di alcuni problemi.</span><span class="sxs-lookup"><span data-stu-id="a644e-104">Adopting a serverless architecture does come with certain challenges.</span></span> <span data-ttu-id="a644e-105">In questa sezione illustra alcune delle considerazioni più comune da tenere presenti.</span><span class="sxs-lookup"><span data-stu-id="a644e-105">This section explores some of the more common considerations to be aware of.</span></span> <span data-ttu-id="a644e-106">Tutti questi problemi sono soluzioni.</span><span class="sxs-lookup"><span data-stu-id="a644e-106">All of these challenges have solutions.</span></span> <span data-ttu-id="a644e-107">Come con tutte le scelte di architettura, la decisione di operatività senza server deve essere presa solo dopo aver considerato con attenzione i vantaggi e svantaggi.</span><span class="sxs-lookup"><span data-stu-id="a644e-107">As with all architecture choices, the decision to go serverless should be made only after carefully considering the pros and cons.</span></span> <span data-ttu-id="a644e-108">A seconda delle esigenze dell'applicazione, è possibile decidere che la soluzione ideale per alcuni componenti non è un'implementazione senza server.</span><span class="sxs-lookup"><span data-stu-id="a644e-108">Depending on the needs of your application, you may decide a serverless implementation isn't the right solution for certain components.</span></span>

## <a name="managing-state"></a><span data-ttu-id="a644e-109">La gestione dello stato</span><span class="sxs-lookup"><span data-stu-id="a644e-109">Managing state</span></span>

<span data-ttu-id="a644e-110">Le funzioni senza server, come i microservizi in generale, sono senza state per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="a644e-110">Serverless functions, as with microservices in general, are stateless by default.</span></span> <span data-ttu-id="a644e-111">Stato evitando Abilita senza server per essere temporanei, per la scalabilità orizzontale e per offrire resilienza senza un punto centrale di errore.</span><span class="sxs-lookup"><span data-stu-id="a644e-111">Avoiding state enables serverless to be ephemeral, to scale out, and to provide resiliency without a central point of failure.</span></span> <span data-ttu-id="a644e-112">In alcuni casi, i processi aziendali richiedono lo stato.</span><span class="sxs-lookup"><span data-stu-id="a644e-112">In some circumstances, business processes require state.</span></span> <span data-ttu-id="a644e-113">Se il processo richiede lo stato, sono disponibili due opzioni.</span><span class="sxs-lookup"><span data-stu-id="a644e-113">If your process requires state, you have two options.</span></span> <span data-ttu-id="a644e-114">È possibile adottare un modello diverso da quello senza server, o interagire con un servizio separato che fornisce lo stato.</span><span class="sxs-lookup"><span data-stu-id="a644e-114">You can adopt a model other than serverless, or interact with a separate service that provides state.</span></span> <span data-ttu-id="a644e-115">Aggiunta dello stato può complicare la soluzione e rendono più difficile a scalabilità e potenzialmente creare un singolo punto di guasto.</span><span class="sxs-lookup"><span data-stu-id="a644e-115">Adding state can complicate the solution and make it harder to scale, and potentially create a single point of failure.</span></span> <span data-ttu-id="a644e-116">Valutare attentamente se la funzione richiede assolutamente dello stato.</span><span class="sxs-lookup"><span data-stu-id="a644e-116">Carefully consider whether your function absolutely requires state.</span></span> <span data-ttu-id="a644e-117">Se la risposta è "Sì", determinare se è tuttavia utile per l'implementazione con senza server.</span><span class="sxs-lookup"><span data-stu-id="a644e-117">If the answer is "yes," determine whether it still makes sense to implement it with serverless.</span></span>

<span data-ttu-id="a644e-118">Esistono diverse soluzioni adottare stato senza compromettere i vantaggi degli strumenti senza server.</span><span class="sxs-lookup"><span data-stu-id="a644e-118">There are several solutions to adopt state without compromising the benefits of serverless.</span></span> <span data-ttu-id="a644e-119">Alcune delle soluzioni più comuni includono:</span><span class="sxs-lookup"><span data-stu-id="a644e-119">Some of the more popular solutions include:</span></span>

* <span data-ttu-id="a644e-120">Usare un archivio dati temporaneo o una cache distribuita, ad esempio Redis</span><span class="sxs-lookup"><span data-stu-id="a644e-120">Use a temporary data store or distributed cache, like Redis</span></span>
* <span data-ttu-id="a644e-121">Stato di Store in un database, ad esempio SQL o COSMOS DB</span><span class="sxs-lookup"><span data-stu-id="a644e-121">Store state in a database, like SQL or CosmosDB</span></span>
* <span data-ttu-id="a644e-122">Gestire lo stato tramite un motore del flusso di lavoro come funzioni permanenti</span><span class="sxs-lookup"><span data-stu-id="a644e-122">Handle state through a workflow engine like durable functions</span></span>

<span data-ttu-id="a644e-123">La conclusione è che è necessario essere consapevoli della necessità di una gestione dello stato all'interno di processi che stai valutando da implementare grazie a senza server.</span><span class="sxs-lookup"><span data-stu-id="a644e-123">The bottom line is that you should be aware of the need for any state management within processes you're considering to implement with serverless.</span></span>

## <a name="long-running-processes"></a><span data-ttu-id="a644e-124">Processi a esecuzione prolungata</span><span class="sxs-lookup"><span data-stu-id="a644e-124">Long-running processes</span></span>

<span data-ttu-id="a644e-125">Molti vantaggi degli strumenti senza server si basano sui processi in corso temporanee.</span><span class="sxs-lookup"><span data-stu-id="a644e-125">Many benefits of serverless rely on the processes being ephemeral.</span></span> <span data-ttu-id="a644e-126">Tempi di esecuzione brevi rendono più semplice per il provider senza server liberare risorse come funzioni di funzioni end e la condivisione tra gli host.</span><span class="sxs-lookup"><span data-stu-id="a644e-126">Short run times make it easier for the serverless provider to free up resources as functions end and share functions across hosts.</span></span> <span data-ttu-id="a644e-127">La maggior parte dei provider di servizi cloud limitare il tempo complessivo che di funzione può essere eseguita per circa 10 minuti.</span><span class="sxs-lookup"><span data-stu-id="a644e-127">Most cloud providers limit the total time your function can run to around 10 minutes.</span></span> <span data-ttu-id="a644e-128">Se il processo potrebbe richiedere più tempo, è possibile considerare un'implementazione alternativa.</span><span class="sxs-lookup"><span data-stu-id="a644e-128">If your process may take longer, you might consider an alternative implementation.</span></span>

<span data-ttu-id="a644e-129">Esistono alcune eccezioni e le soluzioni.</span><span class="sxs-lookup"><span data-stu-id="a644e-129">There are a few exceptions and solutions.</span></span> <span data-ttu-id="a644e-130">Una soluzione può consistere per interrompere il processo in componenti più piccoli che singolarmente richiedono meno tempo per l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="a644e-130">One solution may be to break your process into smaller components that individually take less time to run.</span></span> <span data-ttu-id="a644e-131">Se il processo venga eseguito lungo a causa delle dipendenze, è anche possibile considerare un flusso di lavoro asincrono tramite una soluzione come funzioni permanenti.</span><span class="sxs-lookup"><span data-stu-id="a644e-131">If your process runs long because of dependencies, you can also consider an asynchronous workflow using a solution like durable functions.</span></span> <span data-ttu-id="a644e-132">Funzioni permanenti sospendere e mantengono lo stato del processo mentre è in attesa di un processo esterno per terminare.</span><span class="sxs-lookup"><span data-stu-id="a644e-132">Durable functions pause and maintain the state of your process while it's waiting on an external process to finish.</span></span> <span data-ttu-id="a644e-133">Gestione asincrona riduce il tempo che viene eseguito il processo effettivo.</span><span class="sxs-lookup"><span data-stu-id="a644e-133">Asynchronous handling reduces the time the actual process runs.</span></span>

## <a name="startup-time"></a><span data-ttu-id="a644e-134">Tempo di avvio</span><span class="sxs-lookup"><span data-stu-id="a644e-134">Startup time</span></span>

<span data-ttu-id="a644e-135">Un potenziale problema con le implementazioni senza server è il tempo di avvio.</span><span class="sxs-lookup"><span data-stu-id="a644e-135">One potential concern with serverless implementations is startup time.</span></span> <span data-ttu-id="a644e-136">Per conservare risorse, molti provider senza server creare infrastruttura "su"richiesta.</span><span class="sxs-lookup"><span data-stu-id="a644e-136">To conserve resources, many serverless providers create infrastructure "on demand."</span></span> <span data-ttu-id="a644e-137">Quando viene attivata una funzione senza server dopo un periodo di tempo, le risorse per ospitare la funzione potrebbe essere necessario creare o riavviato.</span><span class="sxs-lookup"><span data-stu-id="a644e-137">When a serverless function is triggered after a period of time, the resources to host the function may need to be created or restarted.</span></span> <span data-ttu-id="a644e-138">In alcune situazioni, avvii a freddo potrebbero causare ritardi di alcuni secondi.</span><span class="sxs-lookup"><span data-stu-id="a644e-138">In some situations, cold starts may result in delays of several seconds.</span></span> <span data-ttu-id="a644e-139">Tempo di avvio varia tra provider e i livelli di servizio.</span><span class="sxs-lookup"><span data-stu-id="a644e-139">Startup time varies across providers and service levels.</span></span> <span data-ttu-id="a644e-140">Esistono diversi approcci per il tempo di avvio di indirizzo, se è importante per ridurre al minimo per il successo dell'app.</span><span class="sxs-lookup"><span data-stu-id="a644e-140">There are a few approaches to address startup time if it's important to minimize for the success of the app.</span></span>

* <span data-ttu-id="a644e-141">Alcuni provider consentono agli utenti di pagare per i livelli di servizio che garantiscono l'infrastruttura è "always on".</span><span class="sxs-lookup"><span data-stu-id="a644e-141">Some providers allow users to pay for service levels that guarantee infrastructure is "always on".</span></span>
* <span data-ttu-id="a644e-142">Implementare un meccanismo keep-alive (ping all'endpoint di mantenerlo "attivi").</span><span class="sxs-lookup"><span data-stu-id="a644e-142">Implement a keep-alive mechanism (ping the endpoint to keep it "awake").</span></span>
* <span data-ttu-id="a644e-143">Utilizzare l'orchestrazione come Kubernetes con un approccio di funzione nei contenitori (l'host è già in esecuzione in modo attivando nuove istanze è estremamente veloce).</span><span class="sxs-lookup"><span data-stu-id="a644e-143">Use orchestration like Kubernetes with a containerized function approach (the host is already running so spinning up new instances is extremely fast).</span></span>

## <a name="database-updates-and-migrations"></a><span data-ttu-id="a644e-144">Le migrazioni e aggiornamenti del database</span><span class="sxs-lookup"><span data-stu-id="a644e-144">Database updates and migrations</span></span>

<span data-ttu-id="a644e-145">Un vantaggio del codice senza server consiste nel fatto che è possibile rilasciare nuove funzioni senza dover ridistribuire l'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="a644e-145">An advantage of serverless code is that you can release new functions without having to redeploy the entire application.</span></span> <span data-ttu-id="a644e-146">Questo vantaggio può diventare uno svantaggio quando è coinvolto un database relazionale.</span><span class="sxs-lookup"><span data-stu-id="a644e-146">This advantage can become a disadvantage when there's a relational database involved.</span></span> <span data-ttu-id="a644e-147">Le modifiche agli schemi di database sono difficili da sincronizzare con gli aggiornamenti senza server.</span><span class="sxs-lookup"><span data-stu-id="a644e-147">Changes to database schemas are difficult to synchronize with serverless updates.</span></span> <span data-ttu-id="a644e-148">Problematiche aggiuntive vengono poste quando le cose vanno male e devono essere eseguito il rollback le modifiche.</span><span class="sxs-lookup"><span data-stu-id="a644e-148">Additional challenges are posed when things go wrong and the changes must be rolled back.</span></span> <span data-ttu-id="a644e-149">L'integrità dei dati è uno dei motivi che è una procedura consigliata per i microservizi e le funzioni senza server che possiedono i propri dati.</span><span class="sxs-lookup"><span data-stu-id="a644e-149">Data integrity is one reason that a best practice for microservices and serverless functions is that they own their own data.</span></span> <span data-ttu-id="a644e-150">È possibile distribuire le modifiche come singola unità di calcolo e di dati.</span><span class="sxs-lookup"><span data-stu-id="a644e-150">It is possible to deploy changes as a single unit of compute and data.</span></span> <span data-ttu-id="a644e-151">La realtà è che molti sistemi legacy funzionalità di un database back-end di grandi dimensioni che deve essere riconciliato con l'architettura senza server.</span><span class="sxs-lookup"><span data-stu-id="a644e-151">The reality is that many legacy systems feature a large back-end database that must be reconciled with the serverless architecture.</span></span>

<span data-ttu-id="a644e-152">Un approccio comune per risolvere il controllo delle versioni dello schema è per evitare di modificare le proprietà esistenti e le colonne, ma invece aggiungere le nuove informazioni.</span><span class="sxs-lookup"><span data-stu-id="a644e-152">A popular approach to solve schema versioning is to never modify existing properties and columns, but instead add new information.</span></span> <span data-ttu-id="a644e-153">Si consideri ad esempio una modifica per passare da un valore booleano "completato" flag per un elenco di attività a una "Data di completamento".</span><span class="sxs-lookup"><span data-stu-id="a644e-153">For example, consider a change to move from a Boolean "completed" flag for a todo list to a "completed date."</span></span> <span data-ttu-id="a644e-154">Invece di rimuovere il campo obsoleto, le modifiche al database saranno:</span><span class="sxs-lookup"><span data-stu-id="a644e-154">Instead of removing the old field, the database change will:</span></span>

1. <span data-ttu-id="a644e-155">Aggiungere un campo nuovo "Data completamento".</span><span class="sxs-lookup"><span data-stu-id="a644e-155">Add a new "completed date" field.</span></span>
1. <span data-ttu-id="a644e-156">Trasforma il campo booleano "completato" a una funzione calcolata che stabilisce se la data di completamento è successiva alla data corrente.</span><span class="sxs-lookup"><span data-stu-id="a644e-156">Transform the "completed" Boolean field to a computed function that evaluates whether the completed date is after the current date.</span></span>
1. <span data-ttu-id="a644e-157">Aggiungere un trigger per impostare la data di completamento alla data corrente quando il valore booleano completato è impostato su true.</span><span class="sxs-lookup"><span data-stu-id="a644e-157">Add a trigger to set the completed date to the current date when the completed Boolean is set to true.</span></span>

<span data-ttu-id="a644e-158">La sequenza di modifiche assicura che il codice legacy continui a funzionare "così com'è", mentre le funzioni senza server più recenti possono sfruttare i vantaggi del nuovo campo.</span><span class="sxs-lookup"><span data-stu-id="a644e-158">The sequence of changes ensures that legacy code continues to run "as is" while newer serverless functions can take advantage of the new field.</span></span>

<span data-ttu-id="a644e-159">Per altre informazioni sui dati nelle architetture senza server, vedere [sfide e soluzioni per la gestione dei dati distribuiti](../microservices-architecture/architect-microservice-container-applications/distributed-data-management.md).</span><span class="sxs-lookup"><span data-stu-id="a644e-159">For more information about data in serverless architectures, see [Challenges and solutions for distributed data management](../microservices-architecture/architect-microservice-container-applications/distributed-data-management.md).</span></span>

## <a name="scaling"></a><span data-ttu-id="a644e-160">Ridimensionamento</span><span class="sxs-lookup"><span data-stu-id="a644e-160">Scaling</span></span>

<span data-ttu-id="a644e-161">Si tratta di un preconcetto comune che senza server non significa "Nessun server".</span><span class="sxs-lookup"><span data-stu-id="a644e-161">It's a common misconception that serverless means "no server."</span></span> <span data-ttu-id="a644e-162">È in effetti "meno server".</span><span class="sxs-lookup"><span data-stu-id="a644e-162">It's in fact "less server."</span></span> <span data-ttu-id="a644e-163">Il fatto vi è che un'infrastruttura di backup è importante comprendere per quanto riguarda la scalabilità.</span><span class="sxs-lookup"><span data-stu-id="a644e-163">The fact there is a backing infrastructure is important to understand when it comes to scaling.</span></span> <span data-ttu-id="a644e-164">Le piattaforme più senza server offrono un set di controlli per la gestione come l'infrastruttura deve aumentare quando si aumenta la densità di eventi.</span><span class="sxs-lookup"><span data-stu-id="a644e-164">Most serverless platforms provide a set of controls to handle how the infrastructure should scale when event density increases.</span></span> <span data-ttu-id="a644e-165">È possibile scegliere tra un'ampia gamma di opzioni, ma la strategia può variare a seconda della funzione.</span><span class="sxs-lookup"><span data-stu-id="a644e-165">You can choose from a variety of options, but your strategy may vary depending on the function.</span></span> <span data-ttu-id="a644e-166">Inoltre, le funzioni sono in genere eseguite con un host correlate, in modo che le funzioni nello stesso host hanno le stesse opzioni di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="a644e-166">Furthermore, functions are typically run under a related host, so that functions on the same host have the same scale options.</span></span> <span data-ttu-id="a644e-167">Di conseguenza è necessario organizzare e intervenirvi quali funzioni sono ospitate in base a requisiti di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="a644e-167">Therefore it is necessary to organize and strategize which functions are hosted together based on scale requirements.</span></span>

<span data-ttu-id="a644e-168">Le regole specificano spesso come scalabilità verticale (aumentare le risorse host) e scalabilità orizzontale (aumentare il numero di istanze dell'host) in base a diversi parametri.</span><span class="sxs-lookup"><span data-stu-id="a644e-168">Rules often specify how to scale-up (increase the host resources) and scale-out (increase the number of host instances) based on varying parameters.</span></span> <span data-ttu-id="a644e-169">I trigger per le scale potrebbero includere pianificazione, frequenza delle richieste, utilizzo della CPU e utilizzo della memoria.</span><span class="sxs-lookup"><span data-stu-id="a644e-169">Triggers for scales may include schedule, request rates, CPU utilization, and memory usage.</span></span> <span data-ttu-id="a644e-170">Prestazioni più elevate spesso ha un costo maggiore.</span><span class="sxs-lookup"><span data-stu-id="a644e-170">Higher performance often comes at a greater cost.</span></span> <span data-ttu-id="a644e-171">Gli approcci meno costosi, in base al consumo non possono scalare rapidamente quando la frequenza delle richieste potrebbe trovarsi improvvisamente aumentare.</span><span class="sxs-lookup"><span data-stu-id="a644e-171">The less expensive, consumption-based approaches may not scale as quickly when the request rate suddenly increases.</span></span> <span data-ttu-id="a644e-172">Non c'è un compromesso tra pagare in anticipo "assicurata" e pagare esclusivamente "come si go" ed rischiando risposte più lente a causa dell'improvviso aumento della domanda.</span><span class="sxs-lookup"><span data-stu-id="a644e-172">There is a trade-off between paying up front "insurance cost" versus paying strictly "as you go" and risking slower responses due to sudden increases in demand.</span></span>

## <a name="monitoring-tracing-and-logging"></a><span data-ttu-id="a644e-173">La registrazione, traccia e monitoraggio</span><span class="sxs-lookup"><span data-stu-id="a644e-173">Monitoring, tracing, and logging</span></span>

<span data-ttu-id="a644e-174">Un aspetto spesso sottovalutato della metodologia DevOps è il monitoraggio delle applicazioni dopo la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="a644e-174">An often overlooked aspect of DevOps is monitoring applications once deployed.</span></span> <span data-ttu-id="a644e-175">È importante disporre di una strategia per il monitoraggio funzioni senza server.</span><span class="sxs-lookup"><span data-stu-id="a644e-175">It's important to have a strategy for monitoring serverless functions.</span></span> <span data-ttu-id="a644e-176">Il problema maggiore consiste spesso correlazione oppure il riconoscimento quando un utente chiama le funzioni più come parte dell'interazione stessa.</span><span class="sxs-lookup"><span data-stu-id="a644e-176">The biggest challenge is often correlation, or recognizing when a user calls multiple functions as part of the same interaction.</span></span> <span data-ttu-id="a644e-177">Piattaforme senza server più consentono console registrazione che può essere importati in strumenti di terze parti.</span><span class="sxs-lookup"><span data-stu-id="a644e-177">Most serverless platforms allow console logging that can be imported into third-party tools.</span></span> <span data-ttu-id="a644e-178">Sono disponibili anche opzioni per automatizzare la raccolta dei dati di telemetria, generare e registrare gli ID di correlazione e monitorare le azioni specifiche per fornire informazioni dettagliate.</span><span class="sxs-lookup"><span data-stu-id="a644e-178">There are also options to automate collection of telemetry, generate and track correlation IDs, and monitor specific actions to provide detailed insights.</span></span> <span data-ttu-id="a644e-179">Azure offre l'avanzata [piattaforma di Application Insights](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) per il monitoraggio e analitica.</span><span class="sxs-lookup"><span data-stu-id="a644e-179">Azure provides the advanced [Application Insights platform](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) for monitoring and analytics.</span></span>

## <a name="inter-service-dependencies"></a><span data-ttu-id="a644e-180">Dipendenze tra servizi</span><span class="sxs-lookup"><span data-stu-id="a644e-180">Inter-service dependencies</span></span>

<span data-ttu-id="a644e-181">Un'architettura senza server può includere funzioni che si basano su altre funzioni.</span><span class="sxs-lookup"><span data-stu-id="a644e-181">A serverless architecture may include functions that rely on other functions.</span></span> <span data-ttu-id="a644e-182">Infatti, non è insolito in un'architettura senza server per avere più servizi comunicano tra loro come parte di una transazione distribuita o di interazione.</span><span class="sxs-lookup"><span data-stu-id="a644e-182">In fact, it isn't uncommon in a serverless architecture to have multiple services call each other as part of an interaction or distributed transaction.</span></span> <span data-ttu-id="a644e-183">Per evitare l'accoppiamento forte, è consigliabile che i servizi non di riferimento tra loro direttamente.</span><span class="sxs-lookup"><span data-stu-id="a644e-183">To avoid strong coupling, it's recommended that services don't reference each other directly.</span></span> <span data-ttu-id="a644e-184">Quando è necessario modificare l'endpoint per un servizio, può comportare principali refactoring riferimenti diretti.</span><span class="sxs-lookup"><span data-stu-id="a644e-184">When the endpoint for a service needs to change, direct references could result in major refactoring.</span></span> <span data-ttu-id="a644e-185">Soluzione suggerita è fornire un meccanismo di individuazione del servizio, ad esempio un registro di sistema, che fornisce il punto di fine appropriato per un tipo di richiesta.</span><span class="sxs-lookup"><span data-stu-id="a644e-185">A suggested solution is to provide a service discovery mechanism, such as a registry, that provides the appropriate end point for a request type.</span></span> <span data-ttu-id="a644e-186">Un'altra soluzione consiste nello sfruttare servizi di messaggistica come code o argomenti per la comunicazione tra servizi.</span><span class="sxs-lookup"><span data-stu-id="a644e-186">Another solution is to leverage messaging services like queues or topics for communication between services.</span></span>

## <a name="managing-failure-and-providing-resiliency"></a><span data-ttu-id="a644e-187">La gestione di errori e fornire resilienza</span><span class="sxs-lookup"><span data-stu-id="a644e-187">Managing failure and providing resiliency</span></span>

<span data-ttu-id="a644e-188">È anche importante tenere in considerazione la *schema circuit breaker*: Se, per qualche motivo, un servizio continua ad avere esito negativo, non è consigliabile chiamare più volte tale servizio.</span><span class="sxs-lookup"><span data-stu-id="a644e-188">It's also important to consider the *circuit-breaker pattern*: If, for some reason, a service continues to fail, it isn't advisable to call that service repeatedly.</span></span> <span data-ttu-id="a644e-189">Al contrario, viene chiamato un servizio alternativo o un messaggio restituito fino a quando non viene ristabilita l'integrità dei servizi dipendenti.</span><span class="sxs-lookup"><span data-stu-id="a644e-189">Instead, an alternative service is called or a message returned until the health of the dependent service is re-established.</span></span> <span data-ttu-id="a644e-190">L'architettura senza server deve prendere in considerazione la strategia per la risoluzione e la gestione delle dipendenze tra servizi.</span><span class="sxs-lookup"><span data-stu-id="a644e-190">The serverless architecture needs to take into account the strategy for resolving and managing inter-service dependencies.</span></span>

<span data-ttu-id="a644e-191">Per continuare il modello a interruttore, servizi devono essere resilienti e a tolleranza di errore.</span><span class="sxs-lookup"><span data-stu-id="a644e-191">To continue the circuit-breaker pattern, services need to be fault tolerant and resilient.</span></span> <span data-ttu-id="a644e-192">Tolleranza di errore si riferisce alla capacità dell'applicazione per continuare l'esecuzione anche dopo le eccezioni impreviste o stati non validi vengono rilevati.</span><span class="sxs-lookup"><span data-stu-id="a644e-192">Fault tolerance refers to the ability of your application to continue running even after unexpected exceptions or invalid states are encountered.</span></span> <span data-ttu-id="a644e-193">Tolleranza di errore è in genere una funzione del codice stesso e che la modalità è scritta gestire le eccezioni.</span><span class="sxs-lookup"><span data-stu-id="a644e-193">Fault tolerance is typically a function of the code itself and how it's written to handle exceptions.</span></span> <span data-ttu-id="a644e-194">Resilienza fa riferimento al modo in cui in grado di supportare l'app è in il ripristino da errori.</span><span class="sxs-lookup"><span data-stu-id="a644e-194">Resiliency refers to how capable the app is at recovering from failures.</span></span> <span data-ttu-id="a644e-195">La resilienza è spesso gestita dalla piattaforma senza server.</span><span class="sxs-lookup"><span data-stu-id="a644e-195">Resiliency is often managed by the serverless platform.</span></span> <span data-ttu-id="a644e-196">La piattaforma deve essere in grado di creare rapidamente una nuova istanza della funzione senza server quando si verifica un errore di quello esistente.</span><span class="sxs-lookup"><span data-stu-id="a644e-196">The platform should be able to spin up a new serverless function instance when the existing one fails.</span></span> <span data-ttu-id="a644e-197">La piattaforma deve essere anche abbastanza intelligente da arrestare attivando nuove istanze quando ha esito negativo di ogni nuova istanza.</span><span class="sxs-lookup"><span data-stu-id="a644e-197">The platform should also be intelligent enough to stop spinning up new instances when every new instance fails.</span></span>

<span data-ttu-id="a644e-198">Per altre informazioni, vedere [implementazione dello schema Circuit Breaker](../microservices-architecture/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="a644e-198">For more information, see [Implementing the Circuit Breaker pattern](../microservices-architecture/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span></span>

## <a name="versioning-and-greenblue-deployments"></a><span data-ttu-id="a644e-199">Distribuzioni blue/green e controllo delle versioni</span><span class="sxs-lookup"><span data-stu-id="a644e-199">Versioning and green/blue deployments</span></span>

<span data-ttu-id="a644e-200">Dei principali vantaggi degli strumenti senza server è la possibilità di eseguire l'aggiornamento di una funzione specifica senza dover ridistribuire l'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="a644e-200">A major benefit of serverless is the ability to upgrade a specific function without having to redeploy the entire application.</span></span> <span data-ttu-id="a644e-201">Per l'aggiornamento abbia esito positivo, le funzioni devono essere con controllo delle versioni in modo che servizi chiamandole vengono indirizzati alla versione corretta del codice.</span><span class="sxs-lookup"><span data-stu-id="a644e-201">For upgrades to be successful, functions must be versioned so that services calling them are routed to the correct version of code.</span></span> <span data-ttu-id="a644e-202">È importante anche una strategia per la distribuzione di nuove versioni.</span><span class="sxs-lookup"><span data-stu-id="a644e-202">A strategy for deploying new versions is also important.</span></span> <span data-ttu-id="a644e-203">Un approccio comune consiste nell'usare "verde/blu le distribuzioni."</span><span class="sxs-lookup"><span data-stu-id="a644e-203">A common approach is to use "green/blue deployments."</span></span> <span data-ttu-id="a644e-204">La distribuzione verde è la funzione corrente.</span><span class="sxs-lookup"><span data-stu-id="a644e-204">The green deployment is the current function.</span></span> <span data-ttu-id="a644e-205">Una nuova versione "blu" viene distribuita nell'ambiente di produzione e testata.</span><span class="sxs-lookup"><span data-stu-id="a644e-205">A new "blue" version is deployed to production and tested.</span></span> <span data-ttu-id="a644e-206">Durante il test passa, le versioni di verde e blue vengono scambiate in modo che la nuova versione viene fornito in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="a644e-206">When testing passes, the green and blue versions are swapped so the new version comes live.</span></span> <span data-ttu-id="a644e-207">Se vengono rilevati eventuali problemi, è possibile scambiare nuovamente.</span><span class="sxs-lookup"><span data-stu-id="a644e-207">If any issues are encountered, they can be swapped back.</span></span> <span data-ttu-id="a644e-208">Il supporto di controllo delle versioni e le distribuzioni blue/green richiede una combinazione di creazione di funzioni per supportare le modifiche di versione e l'utilizzo con la piattaforma senza server per gestire le distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="a644e-208">Supporting versioning and green/blue deployments requires a combination of authoring the functions to accommodate version changes and working with the serverless platform to handle deployments.</span></span> <span data-ttu-id="a644e-209">Un possibile approccio consiste nell'utilizzare i proxy, che sono descritte nel [piattaforma senza server Azure](azure-functions.md#proxies) capitolo.</span><span class="sxs-lookup"><span data-stu-id="a644e-209">One possible approach is to use proxies, which are described in the [Azure serverless platform](azure-functions.md#proxies) chapter.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="a644e-210">[Precedente](serverless-architecture.md)
>[Successivo](serverless-design-examples.md)</span><span class="sxs-lookup"><span data-stu-id="a644e-210">[Previous](serverless-architecture.md)
[Next](serverless-design-examples.md)</span></span>